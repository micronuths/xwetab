"use strict";(globalThis.webpackChunkinfinity_hitab_client=globalThis.webpackChunkinfinity_hitab_client||[]).push([[9930,3668],{43670:(e,o,l)=>{l.d(o,{B:()=>a});var t=l(74003),i=l(97432);const a=new class{hasPermission=async()=>new Promise((e=>{if(!t.Pl)return chrome.permissions.contains({permissions:["system.cpu","system.memory"]},(o=>{e(o)}));e(!1)}));reqPermission=async()=>new Promise((e=>{t.Pl?e(!1):chrome.permissions.request({permissions:["system.cpu","system.memory"]},(o=>{chrome.runtime.lastError?e(!1):e(o)}))}));hasBookmarksPermission=async()=>new Promise((e=>{if(!t.Pl)return chrome.permissions.contains({permissions:["bookmarks","favicon"]},(o=>{chrome.runtime.lastError?chrome.permissions.contains({permissions:["bookmarks"]},(o=>{e(o)})):e(o)}));e(!1)}));reqBookmarksPermission=async()=>new Promise((e=>{t.Pl?e(!1):chrome.permissions.request({permissions:["bookmarks","favicon"]},(o=>{chrome.runtime.lastError?"'favicon' is not a recognized permission."==chrome.runtime.lastError.message?((0,i.useBookmarksStore)().setFavicon(!0),chrome.permissions.request({permissions:["bookmarks"]},(o=>{e(o)}))):e(!1):e(o)}))}));getCpuInfo=()=>chrome.system.cpu.getInfo();getStorageInfo=()=>chrome.system.storage.getInfo();getMemoryInfo=()=>chrome.system.memory.getInfo()}},89930:(e,o,l)=>{l.r(o);var t=l(68398),i=l(96755),a=l(79282),r=l(43451),s=l(57268),n=l(29445),c=l(97432),d=l(35427),u=l(94209);const p={class:"modal-bg relative flex h-full w-full flex-row rounded-[12px] bg-color-b3"},m={class:"mt-[152px] mb-[138px] ml-[100px]"},v={class:"whitespace-pre font-ali-75 text-[60px] leading-[84px] text-color-bookmark-t1"},x=(e=>((0,s.dD)("data-v-38e1e56a"),e=e(),(0,s.Cn)(),e))((()=>(0,s._)("br",null,null,-1))),g={class:"text-[40px]"},h={class:"mt-[32px] font-ali-65 text-[16px] leading-[22px] text-color-t2"},f={class:"mt-[12px] whitespace-pre font-ali-55 text-[14px] leading-[20px] text-color-t2"},b=(0,s.aZ)({__name:"widget-bookmarks-start",setup(e){const o=(0,c.useBookmarksStore)(),l=async()=>{o.setIsFirst(!1);await o.reqPermission()&&o.getAllData()};return(e,o)=>{const t=d.Z;return(0,s.wg)(),(0,s.iD)("section",p,[(0,s._)("div",m,[(0,s._)("p",v,[(0,s.Uk)((0,u.toDisplayString)("Hi ~")),x,(0,s._)("span",g,(0,u.toDisplayString)("欢迎使用WeTab书签"),1)]),(0,s._)("p",h,(0,u.toDisplayString)("WeTab 书签可以")+": ",1),(0,s._)("p",f,(0,u.toDisplayString)("始终与本地浏览器书签管理保持同步；\n更高效的书签管理；\n界面更简洁、美观、舒适。"),1),(0,s.Wm)(t,{class:"mt-[32px] h-[36px] w-[96px] shrink-0 bg-color-bookmark-t1 !text-color-white hover:bg-[#4f9748]",type:"main",size:"small",onClick:l},{default:(0,s.w5)((()=>[(0,s.Uk)((0,u.toDisplayString)("开始"),1)])),_:1})])])}}});var w=l(76911);const k=(0,w.Z)(b,[["__scopeId","data-v-38e1e56a"]]);var y=l(34679),A=l(81198),C=l(31286);function S(e){if((0,c.useBookmarksStore)().needInfinityFavicon){return"https://favicon.infinitynewtab.com/"+new URL(e||"").hostname.replace("www.","")+".png"}{const o=new URL(chrome.runtime.getURL("/_favicon/"));return o.searchParams.set("pageUrl",e),o.searchParams.set("size","32"),o.toString()}}var D=l(63477);const B=e=>((0,s.dD)("data-v-68371690"),e=e(),(0,s.Cn)(),e),_=["src"],U=["title"],I=[B((()=>(0,s._)("i",{class:"icon iconfont icon-shanchu2 text-[20px] text-color-t3 transition-colors group-hover:text-color-red"},null,-1)))],R=[B((()=>(0,s._)("i",{class:"icon iconfont icon-xiugai text-[20px] text-color-t3 transition-colors group-hover:text-color-blue"},null,-1)))],F=[B((()=>(0,s._)("i",{class:"icon iconfont icon-tianjiadao text-[20px] text-color-t3 transition-colors group-hover:text-color-green"},null,-1)))],P=(0,s.aZ)({__name:"file-item",props:{data:null,selected:{type:Boolean},checkState:{type:Boolean},disabled:{type:Boolean}},emits:["onchange","add","delete","edit"],setup(e,o){let{emit:l}=o;const i=e;return(o,a)=>((0,s.wg)(),(0,s.iD)("div",{class:"file-item relative flex flex-row items-center rounded-[12px] py-[4px] pl-[12px] pr-[4px] transition-colors hover:bg-color-m2 hover:bg-opacity-5",onClick:a[3]||(a[3]=o=>{return e.disabled?void 0:e.checkState?void l("onchange",!i.selected,i.data):(t=o,void(!i.checkState&&(0,D.Yo)(GlobalGetApi+i.data.url||"",!0,t)));var t})},[e.disabled?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",{key:0,class:(0,u.normalizeClass)(["absolute h-[16px] w-[16px] rounded-[4px] border-[2px] border-color-t4 opacity-0 transition-colors delay-75",[{"!border-color-bookmark-t1 bg-color-bookmark-t1":e.selected},{"cursor-pointer opacity-100 ":e.checkState}]])},[(0,s._)("i",{class:(0,u.normalizeClass)(["icon iconfont icon-checked_icon mt-[-0.7px] ml-[-0.7px] text-[14px] text-color-white opacity-0 transition-opacity delay-75",[{"opacity-100":e.selected}]])},null,2)],2)),(0,s._)("div",{class:(0,u.normalizeClass)(["flex w-full flex-1 flex-row items-center transition-all delay-75",[{"ml-[32px]":e.checkState}]])},[(0,s._)("img",{class:"mr-[12px] h-[16px] w-[16px] cursor-pointer",src:GlobalGetApi+e.data.url&&(0,n.SU)(S)(GlobalGetApi+e.data.url)||(0,n.SU)(C)},null,8,_),(0,s._)("p",{title:e.data.title,class:"flex-1 cursor-pointer truncate font-ali-65 text-[14px] leading-[20px] text-color-t2"},(0,u.toDisplayString)(e.data.title),9,U),e.disabled?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",{key:0,class:(0,u.normalizeClass)(["operation-btn ml-[12px] flex flex-row items-center gap-[8px] transition-opacity",[{"pointer-events-none !opacity-0":e.checkState}]])},[(0,s._)("button",{class:"group h-[28px] w-[28px] rounded-[8px] bg-color-white bg-opacity-60 p-[4px] shadow-icon-add transition-colors hover:bg-opacity-100 dark:bg-opacity-5 dark:hover:bg-opacity-10",onClick:a[0]||(a[0]=(0,t.withModifiers)((o=>l("delete",e.data)),["stop"]))},I),(0,s._)("button",{class:"group h-[28px] w-[28px] rounded-[8px] bg-color-white bg-opacity-60 p-[4px] shadow-icon-add transition-colors hover:bg-opacity-100 dark:bg-opacity-5 dark:hover:bg-opacity-10",onClick:a[1]||(a[1]=(0,t.withModifiers)((o=>l("edit",e.data)),["stop"]))},R),(0,s._)("button",{class:"group h-[28px] w-[28px] rounded-[8px] bg-color-white bg-opacity-60 p-[4px] shadow-icon-add transition-colors hover:bg-opacity-100 dark:bg-opacity-5 dark:hover:bg-opacity-10",onClick:a[2]||(a[2]=(0,t.withModifiers)((o=>l("add",e.data)),["stop"]))},F)],2))],2)]))}}),z=(0,w.Z)(P,[["__scopeId","data-v-68371690"]]);var E=l(17319);const j=["title"],H={key:0,class:"icon iconfont icon-add_icon1 rotate-45 text-[24px] text-color-white"},W={key:1,class:"icon iconfont icon-piliangcaozuo text-[24px] leading-[24px] text-color-white"},Y={class:"flex flex-col items-center gap-[10px]"},L=["title"],K=["title"],T=["title"],q=(e=>((0,s.dD)("data-v-3040e464"),e=e(),(0,s.Cn)(),e))((()=>(0,s._)("div",{class:"mb-[10px] h-[1px] w-[20px] bg-color-m2 bg-opacity-10"},null,-1))),N=(0,s.aZ)({__name:"operation-btn",props:{checkState:{type:Boolean},selectedList:null},emits:["checkState","delete","move","add"],setup(e,o){let{emit:l}=o;const t=e,i=(0,n.iH)(!t.selectedList||!t.selectedList.length),a=(0,n.iH)(i.value||t.selectedList.length>20);(0,s.YP)((()=>t.selectedList),(e=>{i.value=!e||!e.length,a.value=i.value||e.length>20}),{deep:!0});const r=()=>{l("checkState")},c=()=>{t.selectedList.length>20?E.R.warn({message:"批量添加到桌面不能超过20个",duration:1500}):!a.value&&l("add")};return(o,t)=>((0,s.wg)(),(0,s.iD)("div",{class:(0,u.normalizeClass)(["card-shadow absolute bottom-[24px] right-[24px] flex h-[48px] w-[48px] cursor-pointer flex-col-reverse overflow-hidden rounded-[12px] bg-color-white p-[3px] transition-all delay-75 dark:bg-opacity-20",[{"!h-[173px] !p-[9px]":e.checkState}]])},[(0,s._)("div",{class:(0,u.normalizeClass)(["h-[40px] w-[40px] rounded-[8px] bg-color-bookmark-t1 p-[8px] transition-all delay-75",[{"!h-[28px] !w-[28px] !p-[2px]":e.checkState}]]),title:e.checkState?"关闭操作弹窗":"打开操作弹窗",onClick:r},[e.checkState?((0,s.wg)(),(0,s.iD)("i",H)):((0,s.wg)(),(0,s.iD)("i",W))],10,j),(0,s._)("div",Y,[(0,s._)("button",{class:(0,u.normalizeClass)([[{"group hover:bg-color-green hover:bg-opacity-10 dark:hover:bg-opacity-20":!a.value}],"h-[28px] w-[28px] rounded-[8px] bg-color-black bg-opacity-[0.08] p-[4px] transition-colors"]),title:"添加到桌面",onClick:c},[(0,s._)("i",{class:(0,u.normalizeClass)(["icon iconfont icon-tianjiadao text-[20px] leading-[20px] text-color-t4 transition-colors",[{"text-color-t3 group-hover:text-color-green":!a.value}]])},null,2)],10,L),(0,s._)("button",{class:(0,u.normalizeClass)([[{"group hover:bg-color-green hover:bg-opacity-10 dark:hover:bg-opacity-20":!i.value}],"h-[28px] w-[28px] rounded-[8px] bg-color-black bg-opacity-[0.08] p-[4px] transition-colors"]),title:"移动",onClick:t[0]||(t[0]=e=>!i.value&&l("move"))},[(0,s._)("i",{class:(0,u.normalizeClass)(["icon iconfont icon-yidong text-[20px] leading-[20px] text-color-t4 transition-colors",[{"text-color-t3 group-hover:text-color-green":!i.value}]])},null,2)],10,K),(0,s._)("button",{class:(0,u.normalizeClass)([[{"group hover:bg-color-red hover:bg-opacity-10 dark:hover:bg-opacity-20":!i.value}],"h-[28px] w-[28px] rounded-[8px] bg-color-black bg-opacity-[0.08] p-[4px] transition-colors"]),title:"删除",onClick:t[1]||(t[1]=e=>!i.value&&l("delete"))},[(0,s._)("i",{class:(0,u.normalizeClass)(["icon iconfont icon-shanchu2 text-[20px] leading-[20px] text-color-t4 transition-colors",[{"text-color-t3 group-hover:text-color-red":!i.value}]])},null,2)],10,T),q])],2))}}),Z=(0,w.Z)(N,[["__scopeId","data-v-3040e464"]]);var M=l(45911),V=l(91294),O=l(87732),G=l(25382),J=l(11438),X=l(66069),Q=l(81220);const $=["src"],ee=["title"],oe=(0,s.aZ)({__name:"folder-item",props:{disabled:{type:Boolean},curFolderId:null,item:null,num:null,customClick:null},emits:["update:curFolder"],setup(e,o){let{emit:l}=o;const t=e,i=(0,V.V)(),a=i.followSystem?i.systemTheme:i.theme,r=(0,n.iH)("dark"==a?J:O),c=(0,n.iH)("dark"==a?X:G),d=(0,n.iH)(t.curFolderId===t.item.id?t.item:void 0);(0,s.YP)((()=>({followSystem:i.followSystem,systheme:i.systemTheme,theme:i.theme})),(()=>{const e=i.followSystem?i.systemTheme:i.theme;r.value="dark"==e?J:O,c.value="dark"==e?X:G}));const p=(0,M.Z)((e=>{d.value=e,l("update:curFolder",e)}),500,{leading:!0,trailing:!1});return(o,l)=>{var t;return(0,s.wg)(),(0,s.iD)("div",{class:"mx-[16px] mb-[4px] flex cursor-pointer flex-row items-center rounded-[6px] p-[8px] transition-colors hover:bg-color-m2 hover:bg-opacity-5",onClick:l[0]||(l[0]=o=>e.customClick?e.customClick(e.item):!e.disabled&&(0,n.SU)(p)(e.item))},[(0,s._)("img",{class:"mr-[8px] h-[20px] w-[20px]",src:e.curFolderId===e.item.id?r.value:c.value},null,8,$),(0,s._)("p",{title:e.item.title,class:(0,u.normalizeClass)(["flex-1 truncate font-ali-65 text-[14px] leading-[20px] text-color-t2",[{"!text-color-white":e.curFolderId===e.item.id}]])},(0,u.toDisplayString)(e.item.title),11,ee),e.disabled?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("p",{key:0,class:(0,u.normalizeClass)(["ml-[8px] text-[14px] leading-[16px] text-color-t2 text-opacity-40",[{"!text-color-white !text-opacity-40":e.curFolderId===e.item.id}]])},(0,u.toDisplayString)(e.num||(null===(t=(0,n.SU)(Q.GR)(e.item))||void 0===t?void 0:t.length)||0),3))])}}});var le=l(87678),te=l(85763),ie=l(41752),ae=l(23220),re=l(95582),se=l(12793),ne=l(96643),ce=l(17904),de=l(96073),ue=l(1614);const pe=["onClick"],me={class:"flex h-max w-[400px] flex-col rounded-[12px] bg-color-bookmark-b1 shadow-dialog"},ve={class:"mt-[16px] w-full border-b border-color-m2 border-opacity-5 pb-[16px] text-center font-ali-65 text-[16px] leading-[16px] text-color-t1"},xe={key:0,class:"p-[24px]"},ge={class:"flex-1 font-ali-65 text-[14px] leading-[20px] text-color-t2"},he=["onClick"],fe={class:"flex-1 font-ali-65 text-[14px] leading-[20px] text-color-t2"},be={class:"mx-[-24px] mt-[18px] flex-1 overflow-hidden"},we={class:"mt-[40px] flex flex-row items-center justify-end gap-[12px]"},ke={key:1,class:"p-[24px]"},ye={class:"font-ali-65 text-[14px] leading-[20px] text-color-t3"},Ae={class:"text-color-bookmark-t1"},Ce={class:"flex-1 font-ali-65 text-[14px] leading-[20px] text-color-t2"},Se=["onClick"],De={class:"flex-1 font-ali-65 text-[14px] leading-[20px] text-color-t2"},Be={class:"mt-[40px] flex flex-row items-center justify-end gap-[12px]"},_e=(0,s.aZ)({__name:"add-popup",props:{show:{type:Boolean},target:null},emits:["cancel","confirm","back","on-success"],setup(e,o){var l;let{emit:i}=o;const a=e,r=(0,se.i)(),c=(0,n.iH)(a.target?!(null!==(l=a.target)&&void 0!==l&&l.id):null),p=(0,n.iH)(null),m=(0,n.iH)(null),v=(0,n.iH)(null),x=(0,n.iH)(!1),g=(0,n.iH)({name:"",target:"",bgType:"image",bgImage:"",bgColor:""}),h=(0,n.iH)(0),f=(0,n.iH)(r.icons[0]),b=(0,n.iH)(!1);(0,s.YP)((()=>({target:a.target,show:a.show})),(e=>{let{target:o,show:l}=e;l&&(c.value=o?!(null!=o&&o.id):null),c.value?g.value={name:"",target:"",bgType:"image",bgImage:"",bgColor:""}:g.value={name:o.title,target:o.url,bgType:"image",bgImage:"",bgColor:""}})),(0,s.YP)((()=>a.show),(e=>{e||(x.value=!1,f.value=r.icons[0])})),(0,s.YP)((()=>({currentIcon:g.value,iconType:h.value})),(e=>{let{currentIcon:o,iconType:l}=e;(0,s.Y3)((()=>{let e;try{e=new URL((0,D.UN)(o.target)).origin}catch(o){e=""}1===l?p.value.getOnlieIcons(e):a.show&&!c.value&&p.value.resetIcons()}))}),{immediate:1===h.value});const w=()=>{b.value||(x.value=!x.value)},k=e=>{f.value=e},y=e=>{},C=()=>{i("cancel")},S=async()=>{b.value=!0,c.value?await _(a.target):await B(),b.value=!1,i("confirm")},B=async()=>{const e=g.value;let o="";if(1===h.value){if(e.id&&"image"===e.bgType&&0===p.value.curIndex&&!p.value.curBlob)o=e.bgImage;else{if(!p.value.curBlob)return void E.R.fail({message:"请选择图标"});if(p.value.curBlob.size>2097152)return void E.R.fail({message:"文件大小超出限制"});const e=await(0,ne.E)("user-custom-icon",p.value.curBlob),l=e[0];if(o=e[1],l)return void(l.includes(ce.h$)||E.R.fail({message:l}))}U({...e,type:"site",bgType:"image",bgColor:p.value.iconList[p.value.curIndex].bgColor,bgImage:o,origin:"online"})}if(0===h.value&&U({...e,type:"site",bgType:"color",bgText:m.value.iconName,bgColor:m.value.curColor,origin:"color"}),2===h.value){if(!v.value.curBlob)return void E.R.fail({message:"请上传图标"});if(v.value.curBlob.size>2097152)return void E.R.fail({message:"文件大小超出限制"});const[o,l]=await(0,ne.E)("user-custom-icon",v.value.curBlob);if(o)return void(o.includes(ce.h$)||E.R.fail({message:o}));U({...e,type:"site",bgType:"image",bgColor:v.value.bgColor,bgImage:l,origin:"upload"})}},_=async e=>{E.R.loading({message:"正在添加，请稍后...",duration:4e4});const o=[],l=e.map((e=>e.url||"")),[t,i]=await(0,ue.Yh)(l),{images:a}=i||{images:[]};for(let l=0;l<e.length;l++){let t;const i=e[l],r=a[l],s=Date.now();if(r){const{logo:e}=r||{};t={id:(0,D.kb)("icon-"),name:i.title,target:i.url||"",type:"site",bgType:"image",bgImage:e[0],bgColor:"rgba(0, 0, 0, 0)",origin:"online",updateTime:s}}else t={id:(0,D.kb)("icon-"),name:i.title,target:i.url||"",type:"site",bgType:"color",bgText:i.title.slice(0,2),bgColor:"rgba(194, 194, 194, 1)",origin:"color",updateTime:s};o.push(t)}const s=r.icons.findIndex((e=>e.id===f.value.id));(0,se.i)().batchAddToFolder(o,s),E.R.success({message:"添加成功"})},U=e=>{const o=r.icons.findIndex((e=>e.id===f.value.id));r.saveIconOfCategory(e,o),E.R.success({message:"添加成功"}),de.f.sendEvent("add-icon-custom",e.bgType,(0,D.Si)(e.target))};return(0,s.YP)((()=>a.show),(e=>{var o,l,t,i;e||(g.value={name:"",target:"",bgType:"image",bgImage:"",bgColor:""},null===(o=m.value)||void 0===o||null===(l=o.resetValue)||void 0===l||l.call(o),null===(t=v.value)||void 0===t||null===(i=t.resetValue)||void 0===i||i.call(t))})),(o,l)=>{var i,a,D,B;const _=A.Z,U=te.Z,I=le.Z,R=d.Z;return(0,s.wg)(),(0,s.iD)("div",{class:(0,u.normalizeClass)([[{"pointer-events-auto opacity-100":e.show}],"shade pointer-events-none absolute flex h-full w-full items-center justify-center rounded-[12px] bg-color-black bg-opacity-20 opacity-0 transition-opacity"]),onClick:(0,t.withModifiers)(C,["self"])},[(0,s._)("div",me,[(0,s._)("p",ve,(0,u.toDisplayString)(c.value?"添加到桌面":"自定义添加"),1),c.value?c.value?((0,s.wg)(),(0,s.iD)("div",ke,[(0,s._)("p",ye,[(0,s._)("span",Ae,(0,u.toDisplayString)(e.target.length+" "),1),(0,s.Uk)((0,u.toDisplayString)("个书签将以文件夹的形式被添加到桌面的…"),1)]),(0,s._)("div",{class:"relative mt-[16px] flex flex-row items-center rounded-[8px] bg-color-m2 bg-opacity-5 p-[12px]",onClick:w},[(0,s._)("i",{class:(0,u.normalizeClass)([null===(D=f.value)||void 0===D?void 0:D.iconClass,"icon iconfont mr-[12px] text-[20px] text-color-t3"])},null,2),(0,s._)("p",Ce,(0,u.toDisplayString)((null===(B=f.value)||void 0===B?void 0:B.name)||""),1),(0,s._)("i",{class:(0,u.normalizeClass)(["icon iconfont icon-down_icon ml-[12px] text-[12px] text-color-t1 transition-transform",[{"rotate-180":x.value}]])},null,2),(0,s._)("div",{style:(0,u.normalizeStyle)({height:x.value?(0,n.SU)(r).icons.length>8?"292px":`calc((${(0,n.SU)(r).icons.length} * 36px) + 4px)`:"0px"}),class:"hide-scroll absolute top-[48px] left-0 !max-h-[292px] w-full overflow-y-scroll rounded-[8px] bg-color-bookmark-b2 px-[4px] shadow-popover transition-all"},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)((0,n.SU)(r).icons,(e=>((0,s.wg)(),(0,s.iD)("div",{key:e.id,class:"mb-[4px] flex flex-row items-center rounded-[4px] px-[8px] py-[6px] first:mt-[4px] hover:bg-color-m2 hover:bg-opacity-5",onClick:o=>k(e)},[(0,s._)("i",{class:(0,u.normalizeClass)([e.iconClass,"icon iconfont mr-[12px] text-[20px] text-color-t3"])},null,2),(0,s._)("p",De,(0,u.toDisplayString)(e.name),1)],8,Se)))),128))],4)]),(0,s._)("div",Be,[(0,s.Wm)(R,{class:"h-[36px] w-[120px] shrink-0 bg-color-white !text-color-t2 hover:bg-[#ededed] dark:bg-opacity-20",type:"main",disabled:b.value,onClick:C},{default:(0,s.w5)((()=>[(0,s.Uk)((0,u.toDisplayString)("取消"),1)])),_:1},8,["disabled"]),(0,s.Wm)(R,{class:"h-[36px] w-[120px] shrink-0 bg-color-bookmark-t1 !text-color-white hover:bg-[#4f9748]",type:"main",disabled:b.value,onClick:S},{default:(0,s.w5)((()=>[(0,s.Uk)((0,u.toDisplayString)("完成"),1)])),_:1},8,["disabled"])])])):(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",xe,[(0,s.Wm)(_,{value:g.value.name,"onUpdate:value":l[0]||(l[0]=e=>g.value.name=e),icon:"icon-title_icon",placeholder:"名称"},null,8,["value","placeholder"]),(0,s._)("div",{class:"relative mt-[16px] flex flex-row items-center rounded-[8px] bg-color-m2 bg-opacity-5 p-[12px]",onClick:w},[(0,s._)("i",{class:(0,u.normalizeClass)([null===(i=f.value)||void 0===i?void 0:i.iconClass,"icon iconfont mr-[12px] text-[20px] text-color-t3"])},null,2),(0,s._)("p",ge,(0,u.toDisplayString)((null===(a=f.value)||void 0===a?void 0:a.name)||""),1),(0,s._)("i",{class:(0,u.normalizeClass)(["icon iconfont icon-down_icon ml-[12px] text-[12px] text-color-t1 transition-transform",[{"rotate-180":x.value}]])},null,2),(0,s._)("div",{style:(0,u.normalizeStyle)({height:x.value?(0,n.SU)(r).icons.length>8?"292px":`calc((${(0,n.SU)(r).icons.length} * 36px) + 4px)`:"0px"}),class:"hide-scroll absolute top-[48px] left-0 z-[1] !max-h-[292px] w-full overflow-y-scroll rounded-[8px] bg-color-bookmark-b2 px-[4px] shadow-popover transition-all"},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)((0,n.SU)(r).icons,(e=>((0,s.wg)(),(0,s.iD)("div",{key:e.id,class:"mb-[4px] flex flex-row items-center rounded-[4px] px-[8px] py-[6px] first:mt-[4px] hover:bg-color-m2 hover:bg-opacity-5",onClick:o=>k(e)},[(0,s._)("i",{class:(0,u.normalizeClass)([e.iconClass,"icon iconfont mr-[12px] text-[20px] text-color-t3"])},null,2),(0,s._)("p",fe,(0,u.toDisplayString)(e.name),1)],8,he)))),128))],4)]),(0,s._)("div",be,[(0,s.Wm)(I,{active:h.value,"onUpdate:active":l[1]||(l[1]=e=>h.value=e),"x-space":24,sticky:""},{default:(0,s.w5)((()=>[(0,s.Wm)(U,{title:"纯色图标"},{default:(0,s.w5)((()=>[(0,s.Wm)(ae.Z,{ref_key:"$colorIcon",ref:m,class:"!overflow-hidden",icon:g.value},null,8,["icon"])])),_:1},8,["title"]),(0,s.Wm)(U,{title:"在线图标"},{default:(0,s.w5)((()=>[(0,s.Wm)(ie.Z,{ref_key:"$onlineIcon",ref:p,icon:g.value,onOnChange:y},null,8,["icon"])])),_:1},8,["title"]),(0,s.Wm)(U,{title:"本地上传"},{default:(0,s.w5)((()=>[(0,s.Wm)(re.Z,{ref_key:"$uploadIcon",ref:v},null,512)])),_:1},8,["title"])])),_:1},8,["active"])]),(0,s._)("div",we,[(0,s.Wm)(R,{class:"h-[36px] w-[120px] shrink-0 bg-color-white !text-color-t2 hover:bg-[#ededed] dark:bg-opacity-20",type:"main",onClick:C},{default:(0,s.w5)((()=>[(0,s.Uk)((0,u.toDisplayString)("取消"),1)])),_:1}),(0,s.Wm)(R,{class:"h-[36px] w-[120px] shrink-0 bg-color-bookmark-t1 !text-color-white hover:bg-[#4f9748]",type:"main",onClick:S},{default:(0,s.w5)((()=>[(0,s.Uk)((0,u.toDisplayString)("完成"),1)])),_:1})])]))])],10,pe)}}}),Ue=_e,Ie={class:"flex h-max w-[400px] flex-col rounded-[12px] bg-color-bookmark-b1 shadow-dialog"},Re={class:"mt-[16px] w-full border-b border-color-m2 border-opacity-5 pb-[16px] text-center font-ali-65 text-[16px] leading-[16px] text-color-t1"},Fe={key:0,class:"p-[24px]"},Pe={key:0,class:"font-ali-65 text-[14px] leading-[20px] text-color-t3"},ze={class:"text-color-bookmark-t1"},Ee={class:"mt-[40px] flex flex-row items-center justify-end gap-[12px]"},je=(0,s.aZ)({__name:"delete-popup",props:{show:{type:Boolean},target:null},emits:["cancel","confirm"],setup(e,o){var l;let{emit:i}=o;const a=e;(0,s.YP)((()=>a.target),(e=>{r.value=e?!(null!=e&&e.id):null}));const r=(0,n.iH)(a.target?!(null!==(l=a.target)&&void 0!==l&&l.id):null),c=()=>{i("cancel")},p=()=>{i("confirm")};return(o,l)=>{const a=d.Z;return(0,s.wg)(),(0,s.iD)("div",{class:(0,u.normalizeClass)([[{"pointer-events-auto opacity-100":e.show}],"shade pointer-events-none absolute flex h-full w-full items-center justify-center rounded-[12px] bg-color-black bg-opacity-20 opacity-0 transition-opacity"]),onClick:l[0]||(l[0]=(0,t.withModifiers)((e=>i("cancel")),["self"]))},[(0,s._)("div",Ie,[(0,s._)("p",Re,(0,u.toDisplayString)(r.value?"批量删除书签":"删除书签？"),1),e.show&&null!=r.value?((0,s.wg)(),(0,s.iD)("div",Fe,[r.value?((0,s.wg)(),(0,s.iD)("p",Pe,[(0,s._)("span",ze,(0,u.toDisplayString)(e.target.length+" "),1),(0,s.Uk)((0,u.toDisplayString)("个书签将从书签管理和本地浏览器中删除，并不会恢复!"),1)])):((0,s.wg)(),(0,s.j4)(z,{key:1,class:"!mt-[16px] !rounded-[8px] !bg-color-m2 !bg-opacity-5 !p-[12px]",data:e.target,disabled:""},null,8,["data"])),(0,s._)("div",Ee,[(0,s.Wm)(a,{class:"h-[36px] w-[120px] shrink-0 bg-color-white !text-color-t2 hover:bg-[#ededed] dark:bg-opacity-20",type:"main",onClick:c},{default:(0,s.w5)((()=>[(0,s.Uk)((0,u.toDisplayString)("取消"),1)])),_:1}),(0,s.Wm)(a,{class:"h-[36px] w-[120px] shrink-0 bg-color-red !text-color-white hover:bg-[#e5393b]",type:"main",onClick:p},{default:(0,s.w5)((()=>[(0,s.Uk)((0,u.toDisplayString)("删除"),1)])),_:1})])])):(0,s.kq)("",!0)])],2)}}}),He={class:"flex h-max w-[400px] flex-col rounded-[12px] bg-color-bookmark-b1 shadow-dialog"},We={class:"mt-[16px] w-full border-b border-color-m2 border-opacity-5 pb-[16px] text-center font-ali-65 text-[16px] leading-[16px] text-color-t1"},Ye={class:"p-[24px]"},Le={class:"font-ali-65 text-[14px] leading-[20px] text-color-t3"},Ke={class:"text-color-bookmark-t1"},Te=["src"],qe={class:"flex-1 font-ali-65 text-[14px] leading-[20px] text-color-t2"},Ne={class:"mt-[40px] flex flex-row items-center justify-end gap-[12px]"},Ze=(0,s.aZ)({__name:"move-popup",props:{show:{type:Boolean},selectedFileList:null,curFolder:null,folderList:null},emits:["cancel","confirm"],setup(e,o){let{emit:l}=o;const i=e,a=(0,V.V)(),r=a.followSystem?a.systemTheme:a.theme,c=(0,n.iH)("dark"==r?X:G);(0,s.YP)((()=>i.show),(e=>{e||(p.value=!1)})),(0,s.YP)((()=>i.curFolder),(e=>{m.value=e}));const p=(0,n.iH)(!1),m=(0,n.iH)(i.curFolder),v=e=>{m.value=e},x=()=>{p.value=!p.value},g=()=>{l("cancel")},h=()=>{var e,o;(null===(e=m.value)||void 0===e?void 0:e.id)!=(null===(o=i.curFolder)||void 0===o?void 0:o.id)&&m.value&&l("confirm",m.value)};return(o,i)=>{var a;const r=d.Z;return(0,s.wg)(),(0,s.iD)("div",{class:(0,u.normalizeClass)([[{"!flex":e.show}],"shade absolute hidden h-full w-full items-center justify-center rounded-[12px] bg-color-black bg-opacity-20"]),onClick:i[0]||(i[0]=(0,t.withModifiers)((e=>l("cancel")),["self"]))},[(0,s._)("div",He,[(0,s._)("p",We,(0,u.toDisplayString)("迁移文件夹"),1),(0,s._)("div",Ye,[(0,s._)("p",Le,[(0,s.Uk)((0,u.toDisplayString)("移动")+" ",1),(0,s._)("span",Ke,(0,u.toDisplayString)(" "+e.selectedFileList.length+" "),1),(0,s.Uk)((0,u.toDisplayString)("个书签到..."),1)]),(0,s._)("div",{class:"relative mt-[16px] flex flex-row items-center rounded-[8px] bg-color-m2 bg-opacity-5 p-[12px]",onClick:x},[(0,s._)("img",{class:"mr-[12px] h-[20px] w-[20px]",src:c.value},null,8,Te),(0,s._)("p",qe,(0,u.toDisplayString)((null===(a=m.value)||void 0===a?void 0:a.title)||""),1),(0,s._)("i",{class:(0,u.normalizeClass)(["icon iconfont icon-down_icon ml-[12px] text-[12px] text-color-t1 transition-transform",[{"rotate-180":p.value}]])},null,2),(0,s._)("div",{class:(0,u.normalizeClass)([[{"!h-max !max-h-[270px]":p.value}],"hide-scroll absolute top-[48px] left-0 h-0 w-full overflow-y-scroll rounded-[8px] bg-color-bookmark-b2 px-[4px] shadow-popover transition-all"])},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.folderList,(e=>((0,s.wg)(),(0,s.j4)(oe,{key:e.id,class:"!mx-0 !rounded-[4px] !py-[6px] first:mt-[4px]",item:e,disabled:"","custom-click":v},null,8,["item"])))),128))],2)]),(0,s._)("div",Ne,[(0,s.Wm)(r,{class:"h-[36px] w-[120px] shrink-0 bg-color-white !text-color-t2 hover:bg-[#ededed] dark:bg-opacity-20",type:"main",onClick:g},{default:(0,s.w5)((()=>[(0,s.Uk)((0,u.toDisplayString)("取消"),1)])),_:1}),(0,s.Wm)(r,{class:"h-[36px] w-[120px] shrink-0 bg-color-bookmark-t1 !text-color-white hover:bg-[#4f9748]",type:"main",onClick:h},{default:(0,s.w5)((()=>[(0,s.Uk)((0,u.toDisplayString)("完成"),1)])),_:1})])])])],2)}}});var Me=l(50344);const Ve={class:"flex h-max w-[400px] flex-col rounded-[12px] bg-color-bookmark-b1 shadow-dialog"},Oe={class:"mt-[16px] w-full border-b border-color-m2 border-opacity-5 pb-[16px] text-center font-ali-65 text-[16px] leading-[16px] text-color-t1"},Ge={class:"p-[24px]"},Je=["src"],Xe={class:"flex-1 font-ali-65 text-[14px] leading-[20px] text-color-t2"},Qe={class:"mt-[40px] flex flex-row items-center justify-end gap-[12px]"},$e=(0,s.aZ)({__name:"edit-popup",props:{show:{type:Boolean},data:null,curFolder:null,folderList:null},emits:["cancel","confirm"],setup(e,o){let{emit:l}=o;const i=e,a=(0,V.V)(),r=a.followSystem?a.systemTheme:a.theme,c=(0,n.iH)("dark"==r?X:G);(0,s.YP)((()=>i.curFolder),(e=>{m.value=e})),(0,s.YP)((()=>i.data),(e=>{v.value=(0,Me.cloneDeep)(e)||{title:"",id:"-1",url:""}})),(0,s.YP)((()=>i.show),(e=>{e||(p.value=!1)}));const p=(0,n.iH)(!1),m=(0,n.iH)(i.curFolder),v=(0,n.iH)((0,Me.cloneDeep)(i.data)||{title:"",id:"-1",url:""}),x=e=>{m.value=e},g=()=>{p.value=!p.value},h=()=>{l("cancel")},f=()=>{var e,o,t,a,r;l("confirm",{title:null===(e=v.value)||void 0===e?void 0:e.title,url:null===(o=v.value)||void 0===o?void 0:o.url,parentId:(null===(t=m.value)||void 0===t?void 0:t.id)!=(null===(a=i.curFolder)||void 0===a?void 0:a.id)?null===(r=m.value)||void 0===r?void 0:r.id:void 0})};return(o,i)=>{var a;const r=A.Z,n=d.Z;return(0,s.wg)(),(0,s.iD)("div",{class:(0,u.normalizeClass)([[{"!flex":e.show}],"shade absolute hidden h-full w-full items-center justify-center rounded-[12px] bg-color-black bg-opacity-20"]),onClick:i[2]||(i[2]=(0,t.withModifiers)((e=>l("cancel")),["self"]))},[(0,s._)("div",Ve,[(0,s._)("p",Oe,(0,u.toDisplayString)("编辑书签"),1),(0,s._)("div",Ge,[(0,s.Wm)(r,{value:v.value.title,"onUpdate:value":i[0]||(i[0]=e=>v.value.title=e),icon:"icon-title_icon",placeholder:"名称"},null,8,["value","placeholder"]),(0,s._)("div",{class:"relative my-[16px] flex cursor-pointer flex-row items-center rounded-[8px] bg-color-m2 bg-opacity-5 p-[12px]",onClick:g},[(0,s._)("img",{class:"mr-[12px] h-[20px] w-[20px]",src:c.value},null,8,Je),(0,s._)("p",Xe,(0,u.toDisplayString)((null===(a=m.value)||void 0===a?void 0:a.title)||""),1),(0,s._)("i",{class:(0,u.normalizeClass)(["icon iconfont icon-down_icon ml-[12px] text-[12px] text-color-t1 transition-transform",[{"rotate-180":p.value}]])},null,2),(0,s._)("div",{style:(0,u.normalizeStyle)({height:p.value?e.folderList.length>8?"292px":`calc((${e.folderList.length} * 36px) + 4px)`:"0px"}),class:"hide-scroll absolute top-[48px] left-0 z-[1] !max-h-[292px] w-full overflow-y-scroll rounded-[8px] bg-color-bookmark-b2 px-[4px] shadow-popover transition-all"},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.folderList,(e=>((0,s.wg)(),(0,s.j4)(oe,{key:e.id,class:"!mx-0 !rounded-[4px] !py-[6px] first:mt-[4px]",item:e,disabled:"","custom-click":x},null,8,["item"])))),128))],4)]),(0,s.Wm)(r,{value:v.value.url,"onUpdate:value":i[1]||(i[1]=e=>v.value.url=e),icon:"icon-link_icon",placeholder:"链接"},null,8,["value","placeholder"]),(0,s._)("div",Qe,[(0,s.Wm)(n,{class:"h-[36px] w-[120px] shrink-0 bg-color-white !text-color-t2 hover:bg-[#ededed] dark:bg-opacity-20",type:"main",onClick:h},{default:(0,s.w5)((()=>[(0,s.Uk)((0,u.toDisplayString)("取消"),1)])),_:1}),(0,s.Wm)(n,{class:"h-[36px] w-[120px] shrink-0 bg-color-bookmark-t1 !text-color-white hover:bg-[#4f9748]",type:"main",onClick:f},{default:(0,s.w5)((()=>[(0,s.Uk)((0,u.toDisplayString)("完成"),1)])),_:1})])])])],2)}}}),eo=e=>((0,s.dD)("data-v-5789ff34"),e=e(),(0,s.Cn)(),e),oo={class:"bookmark-list relative flex h-full w-full flex-col rounded-[12px] bg-color-b3"},lo={class:"relative flex h-full w-full flex-row-reverse"},to={class:"relative h-full w-full overflow-hidden"},io=eo((()=>(0,s._)("div",{class:"h-full w-[1px] bg-color-m2 bg-opacity-5"},null,-1))),ao=eo((()=>(0,s._)("div",{class:"mb-[16px] h-[1px] w-full bg-color-m2 bg-opacity-5"},null,-1))),ro=(0,s.aZ)({__name:"widget-bookmarks-list",setup(e){const o=(0,c.useBookmarksStore)(),l="bookmark_folder_",i={id:"-111",title:"搜索结果",children:[]},a={id:"-222",title:"最近添加",children:[]},r=(0,n.iH)(!1),d=(0,n.iH)([]),p=(0,n.iH)(a),m=(0,n.iH)(a),v=(0,n.iH)(!1),x=(0,n.iH)(!1),g=(0,n.iH)(!1),h=(0,n.iH)(!1),f=(0,n.iH)(""),b=(0,n.iH)(),w=(0,n.iH)(),k=(0,n.iH)(1),C=(0,n.iH)(),S=(0,n.iH)(!0),D=(0,n.iH)(0),B=(0,s.Fl)((()=>(0,Q.OK)(o.flattenBookmarks)||[]));(0,s.bv)((async()=>{p.value=a,w.value=await chrome.bookmarks.getRecent(50),D.value=w.value.length})),(0,s.YP)((()=>o.folderList),(e=>{if(0==k.value)p.value={id:"-111",title:"搜索结果",children:[]};else if(1==k.value)p.value={id:"-222",title:"最近添加",children:[]};else if(p.value){const o=e.findIndex((e=>{var o;return(null===(o=p.value)||void 0===o?void 0:o.id)==e.id}));p.value=e[o]}else p.value=e[k.value-2]}),{immediate:!0}),(0,s.YP)(f,(async e=>{var l,t,a;if(e)if("-111"!==(null===(l=p.value)||void 0===l?void 0:l.id)&&(p.value=i),"-111"===(null===(t=p.value)||void 0===t?void 0:t.id))w.value=o.flattenBookmarks.filter((o=>o.url&&o.title.includes(e)));else if("-222"===(null===(a=p.value)||void 0===a?void 0:a.id))w.value=await chrome.bookmarks.getRecent(50),D.value=w.value.length;else if(p.value){var r;w.value=null===(r=(0,Q.GR)(p.value))||void 0===r?void 0:r.filter((o=>o.title.includes(e)))}else w.value=[];else p.value=m.value}),{immediate:!0}),(0,s.YP)(p,(async e=>{if(S.value=!0,"-111"===(null==e?void 0:e.id))w.value=o.flattenBookmarks.filter((e=>e.url&&e.title.includes(f.value)));else if("-222"===(null==e?void 0:e.id))w.value=await chrome.bookmarks.getRecent(50),D.value=w.value.length;else if(e){var l;w.value=null===(l=(0,Q.GR)(e))||void 0===l?void 0:l.filter((e=>e.title.includes(f.value)))}else w.value=[]}),{immediate:!0}),(0,s.YP)((()=>o.modalShow),(e=>{e||(v.value=!1,x.value=!1,g.value=!1,h.value=!1,f.value="",d.value=[],r.value=!1)})),(0,s.YP)(r,(e=>{e||(d.value=[])})),(0,s.YP)((()=>({showAddPopup:v.value,showDeletePopup:x.value,showEditPopup:h.value})),(e=>{let{showAddPopup:o,showDeletePopup:l,showEditPopup:t}=e;o||l||t||(b.value=void 0)})),(0,s.YP)(p,(e=>{if("-111"==(null==e?void 0:e.id))k.value=0;else if("-222"==(null==e?void 0:e.id))k.value=1;else{const l=o.folderList.findIndex((o=>o.id===(null==e?void 0:e.id)));k.value=l+2,-1==l&&(p.value=a)}const t=document.getElementById(l+(null==e?void 0:e.id));var i,s;"-111"!=(null==e?void 0:e.id)?((null===(i=m.value)||void 0===i?void 0:i.id)!=(null==e?void 0:e.id)&&(m.value=e),f.value="",setTimeout((()=>{null==t||t.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"})}),0)):(null===(s=C.value)||void 0===s||s.scrollTo({top:0,behavior:"smooth"}),setTimeout((()=>{null==t||t.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"})}),0));d.value=[],r.value=!1}));const _=(e,o)=>{const l=d.value.findIndex((e=>e.id==o.id));e?-1==l&&d.value.push(o):-1!=l&&d.value.splice(l,1)},U=()=>{v.value=!1},I=()=>{d.value=[],U()},R=()=>{x.value=!1},F=async()=>{var e,l;null!==(e=b.value)&&void 0!==e&&e.id?await o.batchRemoveBookmark([null===(l=b.value)||void 0===l?void 0:l.id]):await o.batchRemoveBookmark(d.value.map((e=>e.id))),R()},P=()=>{g.value=!1},E=async e=>{await o.batchMoveBookmark(d.value.map((e=>e.id)),{parentId:e.id}),P()},j=()=>{h.value=!1},H=async e=>{var l,t;null!==(l=b.value)&&void 0!==l&&l.id&&await o.updateBookmark(null===(t=b.value)||void 0===t?void 0:t.id,e);j()},W=()=>{v.value=!0},Y=()=>{x.value=!0},L=()=>{g.value=!0},K=e=>{b.value=e,v.value=!0},T=e=>{b.value=e,x.value=!0},q=e=>{b.value=e,h.value=!0};return(e,c)=>{var m,N,M,V,O,G,J,X,Q;const $=A.Z,ee=y.Z;return(0,s.wg)(),(0,s.iD)("section",oo,[(0,s._)("div",{class:(0,u.normalizeClass)(["bookmark-head hidden h-fit w-full p-[15px]",[{"bg-color-m1":!S.value}]])},[(0,s.Wm)($,{value:f.value,"onUpdate:value":c[0]||(c[0]=e=>f.value=e),icon:"icon-magnifier_icon !text-color-t2",class:"ml-[40px] flex-1 !text-color-calc-t2",placeholder:"搜索书签"},null,8,["value","placeholder"]),(0,s.wy)((0,s._)("p",{class:"ml-[10px] min-w-[43px] max-w-[70px] cursor-pointer truncate text-right text-[14px] text-color-t2",onClick:c[1]||(c[1]=e=>S.value=!S.value)},(0,u.toDisplayString)(null===(m=p.value)||void 0===m?void 0:m.title),513),[[t.vShow,(null===(N=(0,n.SU)(o).folderList)||void 0===N?void 0:N.length)>0]])],2),(0,s._)("div",lo,[(0,s._)("div",to,[(null===(M=w.value)||void 0===M?void 0:M.length)>0?((0,s.wg)(),(0,s.iD)("div",{key:0,ref_key:"contentRef",ref:C,class:"file-list hi-scroll h-full w-full overflow-x-hidden overflow-y-scroll rounded-r-[12px] px-[60px] py-[40px] pb-[90px]"},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(w.value,((e,o)=>((0,s.wg)(),(0,s.j4)(z,{id:"bookmark_file_"+o,key:e.id,data:e,"check-state":r.value,selected:-1!=d.value.findIndex((o=>e.id==o.id)),class:"mx-[16px] mb-[4px] flex w-full cursor-pointer flex-row items-center overflow-hidden rounded-[6px] p-[8px] transition-colors hover:bg-color-m2 hover:bg-opacity-5",onOnchange:_,onAdd:K,onDelete:T,onEdit:q},null,8,["id","data","check-state","selected"])))),128))],512)):((0,s.wg)(),(0,s.j4)(ee,{key:1,class:"h-full w-full justify-center",icon:"icon-fail_icon",desc:(null===(V=(0,n.SU)(o).folderList)||void 0===V?void 0:V.length)>0?"暂未查询到相关书签，请换个关键字再试试":"暂无书签"},null,8,["desc"])),(0,s.Wm)(Z,{"check-state":r.value,"selected-list":d.value,onCheckState:c[2]||(c[2]=e=>r.value=!r.value),onAdd:W,onDelete:Y,onMove:L},null,8,["check-state","selected-list"])]),io,(0,s._)("div",{class:(0,u.normalizeClass)(["bookmark-side-bar h-full w-[300px] shrink-0 rounded-l-[12px] bg-color-m1",[{"bookmark-side-bar-show":!S.value}]])},[(0,s.Wm)($,{value:f.value,"onUpdate:value":c[3]||(c[3]=e=>f.value=e),icon:"icon-magnifier_icon !text-color-t2",class:"side-bar-input m-[16px] mt-[56px] !text-color-calc-t2",placeholder:"搜索书签"},null,8,["value","placeholder"]),ao,(0,s._)("div",{class:(0,u.normalizeClass)(["folder-list fixed h-[508px] w-[300px] overflow-y-scroll pb-[16px] scrollbar-none",[{"!h-[810px]":(0,n.SU)(o).isFullScreen}]])},[(0,s.wy)((0,s._)("div",{class:(0,u.normalizeClass)(["relative flex w-full flex-col transition-all",[{"mt-[-40px]":(null===(O=p.value)||void 0===O?void 0:O.id)!=i.id}]])},[(0,s._)("div",{style:(0,u.normalizeStyle)({top:`calc(${k.value} * 40px)`}),class:"sel-bg absolute z-[-1] mx-[16px] mb-[4px] flex h-[36px] w-[268px] cursor-pointer flex-row items-center rounded-[6px] bg-color-bookmark-t1 p-[8px] transition-all transition-colors"},null,4),(0,s.Wm)(oe,{id:l+i.id,"cur-folder":p.value,"onUpdate:cur-folder":c[4]||(c[4]=e=>p.value=e),item:i,num:null===(G=w.value)||void 0===G?void 0:G.length,"cur-folder-id":(null===(J=p.value)||void 0===J?void 0:J.id)||""},null,8,["id","cur-folder","num","cur-folder-id"]),(0,s.Wm)(oe,{id:l+a.id,"cur-folder":p.value,"onUpdate:cur-folder":c[5]||(c[5]=e=>p.value=e),item:a,num:D.value,"cur-folder-id":(null===(X=p.value)||void 0===X?void 0:X.id)||""},null,8,["id","cur-folder","num","cur-folder-id"]),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)((0,n.SU)(o).folderList,(e=>{var o;return(0,s.wg)(),(0,s.j4)(oe,{id:l+e.id,key:e.id,"cur-folder":p.value,"onUpdate:cur-folder":c[6]||(c[6]=e=>p.value=e),item:e,"cur-folder-id":(null===(o=p.value)||void 0===o?void 0:o.id)||""},null,8,["id","cur-folder","item","cur-folder-id"])})),128))],2),[[t.vShow,(null===(Q=(0,n.SU)(o).folderList)||void 0===Q?void 0:Q.length)>0]])],2)],2)]),(0,s.Wm)(Ue,{show:v.value,target:b.value||d.value,onCancel:U,onConfirm:I},null,8,["show","target"]),(0,s.Wm)(je,{show:x.value,target:b.value||d.value,onCancel:R,onConfirm:F},null,8,["show","target"]),(0,s.Wm)(Ze,{show:g.value,"cur-folder":p.value,"folder-list":(0,n.SU)(B),"selected-file-list":d.value,onCancel:P,onConfirm:E},null,8,["show","cur-folder","folder-list","selected-file-list"]),(0,s.Wm)($e,{show:h.value,data:b.value,"cur-folder":p.value,"folder-list":(0,n.SU)(B),onCancel:j,onConfirm:H},null,8,["show","data","cur-folder","folder-list"])])}}}),so=(0,w.Z)(ro,[["__scopeId","data-v-5789ff34"]]),no=(0,s.aZ)({__name:"widget-bookmarks-modal",setup(e){const o=(0,c.useBookmarksStore)(),l=e=>{o.setIsFullScreen(e)};return(e,t)=>{const i=r.Z,c=a.Z;return(0,s.wg)(),(0,s.j4)(c,{ani:"fade",show:(0,n.SU)(o).modalShow},{default:(0,s.w5)((()=>[(0,s.Wm)(i,{class:"container2","hide-insert-shadow":!0,transparent:!0,"full-screen":(0,n.SU)(o).isFullScreen,onOnClose:t[0]||(t[0]=e=>(0,n.SU)(o).setModal(!1)),onOnFullscreen:l},{default:(0,s.w5)((()=>[(0,n.SU)(o).hasPermission&&!(0,n.SU)(o).isFirst?((0,s.wg)(),(0,s.j4)(so,{key:0})):((0,s.wg)(),(0,s.j4)(k,{key:1}))])),_:1},8,["full-screen"])])),_:1},8,["show"])}}});var co=l(75008);(()=>{const e=(0,D.em)(),o=(0,t.createApp)(no);(0,co.f)(o),o.use(i.M),o.mount(e)})()},97432:(e,o,l)=>{l.r(o),l.d(o,{useBookmarksStore:()=>u});var t=l(43670),i=l(84522),a=l(10435),r=l(17319),s=l(87322);const n=async(e,o)=>{try{await chrome.bookmarks.move(e,o)}catch(e){e&&r.R.fail({message:"操作失败！",duration:1500})}},c=async e=>{await(0,s.stopBrowserListening)(),await Promise.all(e.map((async e=>{await(async e=>{try{await chrome.bookmarks.remove(e)}catch(e){e&&r.R.fail({message:"操作失败！",duration:1500})}})(e)}))),await(0,s.startBrowserListening)()};var d=l(81220);const u=(0,a.Q_)(i.BU.bookmarks,{syncStorage:{watch:["isFirst","bookmarks","flattenBookmarks","folderList","needInfinityFavicon"]},state:()=>({isFullScreen:!1,isFirst:!0,modalShow:!1,hasPermission:!1,bookmarks:[],flattenBookmarks:[],folderList:[],needInfinityFavicon:!1}),actions:{setModal(e){this.modalShow=e},setBookmarks(e){this.bookmarks=e},setIsFirst(e){this.isFirst=e},setIsFullScreen(e){this.isFullScreen=e},async getAllData(){if(this.hasPermission=await t.B.hasBookmarksPermission(),!this.hasPermission)return;const[e,o,l]=await(0,d.jl)();this.bookmarks=e,this.flattenBookmarks=o,this.folderList=l},setFaviconById(e,o){this.bookmarks=[...(0,d.Ob)(this.bookmarks,o,{favicon:e})],this.flattenBookmarks=(0,d.Qj)(this.bookmarks),this.folderList=(0,d.Ln)(this.flattenBookmarks)},async reqPermission(){return this.hasPermission=await t.B.reqBookmarksPermission(),this.hasPermission},async batchMoveBookmark(e,o){await(async(e,o)=>{await(0,s.stopBrowserListening)(),await Promise.all(e.map((async e=>{await n(e,o)}))),await(0,s.startBrowserListening)()})(e,o),this.getAllData()},async batchRemoveBookmark(e){await c(e),this.getAllData()},async updateBookmark(e,o){await(async(e,o)=>{try{await(0,s.stopBrowserListening)(),await chrome.bookmarks.update(e,o),await(0,s.startBrowserListening)()}catch(e){e&&r.R.fail({message:"操作失败！",duration:1500})}})(e,{title:o.title,url:o.url}),o.parentId&&await n(e,{parentId:o.parentId}),this.getAllData()},setFavicon(e){this.needInfinityFavicon=e}}})},87322:(e,o,l)=>{l.r(o),l.d(o,{startBrowserListening:()=>c,stopBrowserListening:()=>d});var t=l(43670),i=l(97432);const a=(e,o)=>{(0,i.useBookmarksStore)().getAllData()},r=(e,o)=>{(0,i.useBookmarksStore)().getAllData()},s=(e,o)=>{(0,i.useBookmarksStore)().getAllData()},n=(e,o)=>{(0,i.useBookmarksStore)().getAllData()},c=async()=>{await t.B.hasBookmarksPermission()&&(chrome.bookmarks.onCreated.addListener(a),chrome.bookmarks.onChanged.addListener(r),chrome.bookmarks.onRemoved.addListener(s),chrome.bookmarks.onMoved.addListener(n))},d=async()=>{await t.B.hasBookmarksPermission()&&(chrome.bookmarks.onCreated.removeListener(a),chrome.bookmarks.onChanged.removeListener(r),chrome.bookmarks.onRemoved.removeListener(s))}},81220:(e,o,l)=>{l.d(o,{GR:()=>c,Ln:()=>r,OK:()=>s,Ob:()=>n,Qj:()=>a,jl:()=>i});var t=l(45844);const i=async()=>{const e=await chrome.bookmarks.getTree(),o=d(e);return[e,o,r(o)]},a=e=>d(e),r=e=>e.filter((e=>{var o;return"0"!=e.id&&e.children&&(null===(o=c(e))||void 0===o?void 0:o.length)>0})),s=e=>e.filter((e=>"0"!=e.id&&e.children)),n=(e,o,l)=>{const i=(0,t.Z)(e);return i.forEach(((e,o)=>l=>{const t=l=>{l.id===e?Object.assign(l,o):l.children&&l.children.forEach(t)};return t(l)})(o,l)),i},c=e=>{var o;return e?null===(o=e.children)||void 0===o?void 0:o.filter((e=>e.url)):[]};function d(e,o){return e.reduce(((e,l)=>(e.push({id:l.id,parentId:(null==o?void 0:o.id)||"",title:l.title,url:l.url,children:l.children,index:l.index}),l.children&&e.push(...d(l.children,l)),e)),[])}},31286:e=>{e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAABQxJREFUWEfFl2lvVGUUx3/nzlKsWJBSKoRENn3hgokJxoIoJi6IxMREGo0fAKWdwr1TCm5khGDKMtPaaUv4AEZTjSYq0QQTCIugxBfikggCJhBCS8EytMosvcc8s5TLdGibBuxN7s3Ns5zn/5z1f4QxPpFIJDh1auXTrstLwAPArPxrJJzPv79bFl/29V3aF4lEUmMRLaMt2r69455AYHCTqrwOVIy2Pj+fENGP0mnf5qamugsj7bkpgLa2trJ0Wt4RwQHuvFGIfA/sBP3cjKvyighhoKbosAFVYoGAbm1oaEiWAlISgLm13+9+ATye33QSuC//3zx7dvW7tbW1g7FYXM2Y44Skq6vLd/Zsd7MIjWZMhFOqzM/vOZrJWC+X0sYwAK2tnQtdd3APMBs4qSqOiH4IzANpc5z6tYWbeAF4xuJAPXBaVdaKaCwP/hywwnFCv3g1cQOA/M2PmcNF9FAyWbYyGEw3gb4tIj9dudL7WCQScUcCsHv37kB/f/KwiCwC+UAkvUPV/zWwBDiXyViLvJoYAmBsnsnI/rzaz6haT6VS0l9WNvgXcJdlSc26dfU/eNGX0oCZj8XaloIcABLJpG9OWZmUQ+YgMBc46vfrsoJPDAGIRuObRXjvRkfRXpDpBrmIvK/KRRF60mm3R/XfnkCgPGHW+/065do1qgIBa4YqM0SoUtXNwEzIyqg0blGQrcqWcDi0Kesr5pNX/Z9AubG368qjIiwC7hhj2I227B/gR+BnwPjQQCZjLTCmyAKIxeK7gDdAvnKcepNoaGnpnKc6eAq4IkKnKvcC00WkUlWNVsytJudOlqugF4Hsqyo9IlwArQOmiPjm2/aa0/mzjIOvENFdtt2wRkyGq6ioNBsrRGSxbdcfyS1sfxX0Y2CP44RWlrrizXzA46TG+V4Eec1x6j/JXay9RlVNHkkkEpeqpLU1/rzr8i1wxHFCi4vDSVU2hsP128YDIBpt3yCizUC744RCHtkGQI1lsVxisXgHsAZodpzQW55Fe4FnwHrBceoMwGHP6BroWA7uN8B3jhN6tiCgpaWtWVU2AJ0GwD5gmYiusu2GzzwAfgUeBBYWJ4+R8kBRmD4MHAd+c5zQQ4W5aDS+SoQuYL8B8Adwv9dRcraKX1blbkhXOo5zeXwaiE2DwCUR/rbt0LTrGhhy8BMGwNXr3jxaNN3y+f4JBiBXb6sJ2tvbK1Mp7R3NBFknVKU2HA59OhFOmA1DEd1m2w0bb0cYirDXtkPPeaJgmwhN2TD8PxKRKvFwONRQMhFNeCrOxXxbp6q86c373mIEEgOtBqpFtFpVsv8ekmrKcreIdqtKd+6fHlXsUYuRAeApx4Z8tgCP5IlJ+S2KfFOOj4rocVVZN6wcm0NKEBJDOHuBKhHOq7Ie9CxYl8HXNzjY3+fzTeo3e/1+neS67lTVwEzX1VkiOhPY4iEkpnwPPcMIiZkppmR+vz45MOAfyFOyCte1ljY21h0qyvVDrNg7vnNnxxOW5R40PCEYZG4yKYboHACdc1NK5jFFlpQCh1Op4IsFUqqqxyZPLluyevXq9EjFyEtKRdiaTAZ3BIMpQ0JGJqUFoUW0/ARoI0hrjpYPq+vDNBCLxQu0/AzoWpDomGl5AUSJxsTwxQW5edmRSPRuNPTcywcikYhVUTG9GXR9dtV4G5MCiJFbM46oEhUhyx/yrZnpiAqdVEHM+Fozr0NNWHNaHP+3qz3/D9K3FAYDioxsAAAAAElFTkSuQmCC"},25382:e=>{e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAAAXNSR0IArs4c6QAAAnVJREFUWEftmM9rE0EUx78vKcSW9qAeVKj/gCKCFy8eRETx2iU9uAHb9MfRg/hnpCDqSdttxe6lIfEkokgRLK0YFETUq2i1P0ybamKTtdmMTMq2u8m23Z2FZA477GWZee995js7M+8tQfJGkvMhBAy6Qs0KMlDyiToMhiEApwF024JsAfgJ4GmEIvfH+x5/CQpwkL0DcDSTOFFFbRqgSwcZAqgCuKUp+j0PY4WH7AJy5bLXX3qE2wn461se+cU1EYASgE9ENDGfyo0DYG5OdgCTWXUEDA9EInFADireaLbDrCVe33m31OhjFzCjvgFwXjTI+lIBq19XwVx18OKVZhfGcpcblbQDFhs2hBevjjHGpoHC8gZKhb+o/quC+aQlotH5VO6h3akdUHjuvmfCDRh/GMwtE0bZwJ98CRsrv98ujOUcq9g+QJdZlYsVM9bV0zvVP7VsdUsFuA1Fc0XTuJjuT5v1N4s0mVFbu8T7fBcMNDKpTPOjR05AEF5offpVeQGBH5qi98oMWNEUvVNmQKYpekRmQGiKXt/AUu5iDhYCCl1/NqNQwVDBoAoEtRf+Bs8cO4sb54ZwuPOIL4ZCeR2P3k/g48oHT3bCgKlrd33DWUQc8vazm8KANfvBvZeXFgG6XnWbAOoX9H6tRUtc1hS9q/Gq+w6gnuJI0BY1RT/pBMyqz8FwRQI4niE0J6yDmcQwgTlKvnbBuqb88Zl4tCcaewWwC+0C2467R9HEuwZmBo5HotV0+yBprmZ2xF3LTks1rmR3NDZIxOJgOAXgKIBDXo4gn8rzKrICYA2Ez4xRumQak1a5afkK/7D6VLVpeKhgUAX/AyxxGTjK79HJAAAAAElFTkSuQmCC"},66069:e=>{e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAAAXNSR0IArs4c6QAAAlxJREFUWEftmEtrE1EUx/+nKdVKd91UqF9AV6LgxoWIKIikUJyLCzdqWxB3fo4WBBWhvjZumtsiHR+gSBEsrRiLK3WvrUYhUtu8mknmyI2dOJlM7DyguYs5u2HO4zf/+zxD0NxIcz4kgHFHqF1BBolMeowJVwAcAjDgKmIB9I0Yz4h7bs1cePw5LsBO8S2Ao3Oj+1P12iMAJ3cKBFBj4uuzxpObAXwju/wDZJAh068CwjULbqxuYmNtMwpAAcBHIrq/NJm9B4D9kjQBxUx6nAnTUSopQAUa3Wiht25ffHNj5bs3RxPQyKTfAjgWtUghV8T6l98ddAiSlRaWp7KnvEq6AZUE7gURJGuLj1W2UPhRRGV9C3bVBrPvqHXMS0QTS5PZu24HN2C4bKHxPQH8V2zbslErWyj9qqD4s/RueSrbMordA/T5wGrBqvcN0LAUz3POa60At6EWgT0npJB19awjIJhofNaYV1uPnoAAvZRi/ozGgFiTwhzWGbAihdmvMyBLYfboDAgpzMYC1nIVK7AEMO5JmCiYKBhXgbjxkefg4aEjmDh6DYP9g6EY8uU8pt/fxofcSqC4yIB3zj0IDecQKcirTy9HBrTdG3enLLsE6HvUlQA0Duj/2S4NcVkKc5/3qPsKoHHF0cBWpTAPeABHXgB8WgM4NdPaL6zn5cgYMbe0fN2C7XDlN1LA1msAx7sFtl3Xv2lSL43M2SGgV3YRchGoGb5tp6OakTFSTNVLxDAAPghA7ch7g2xBIZVXfXsFQB6gT0yQxH0PnXbTyZX8YQ2papt7omBcBf8A6CMSOIzyTvsAAAAASUVORK5CYII="},87732:e=>{e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAAAXNSR0IArs4c6QAAAitJREFUWEftmL1rU1EYh5+fdWjFJTqoUEGIkyKCi4uDiKitEAdxE0RqHR3EP8NJnbRFBDdnEUVKhw7iIIgfpXSoWm2t0AZNa2Ns8soJueHmejH33khzhpzt3vN+POf3cj6F502e89ED7LRCfyloZu7fFWAEOAhsDyX5DSwAj4E7kqY7BWjn3wJoZnuAh8CJdo7ABnBd0u0EtplNmoAN5Z4nhGsmnF2ZYbY4kxrAYFXinYzxoXxhTJLFBQkDjgJ3U2eCOqAD7aBN9G3duHhm3/nFaIww4AvgaNYkH77PMb38FrNYIZKEnRjOF05GlQwDliITIknQFpvVSomPP+b4trZEufoLs1qqGIKrw/vP3Qs7hQEzDz0VRci4ZjUq1QpuYItrC8yXPr08my+0VLGrgNGBFcvFaq4/Nyjpa9DnFWADago4Lqnqvn0EdFyjksZ8Bnwm6bTPgF8kDfoMWJY04DOgSdriMyCS6hPY11ncA8y6+zX9eiXuVMKegl1T8M3Sax68Gqe4vpKKITewg0tHRji063Aiv8wlvvHkWmq4gMhB3hy6lRnQnc/bvjRsEmDsVvcTqG/Q/2qbVOJ1SduiW908UD/ieNA+S9obBXwKnPIAziHEHljde0zLla+LsLFH/j5gEjjWRTCXOv7S5HrMbDfwqIuQDu5C7LUzUM3MnJKXnSFwANgJ9CdZglIq7x4KysAy8L4hzP3guhnEarvupUz63817gJ1K6r2CfwCT1P8p0rIx2QAAAABJRU5ErkJggg=="},11438:e=>{e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAAAXNSR0IArs4c6QAAAilJREFUWEftmL1rU1EYh5+fdWjFpWSpUEGIk06i4OIgIn5UiYO4ufjRgrj5r6gIteri5qpDRYqDg4jiopbSoWq1rUIMmtbG2OSVE3LDzfVi7r2R5gw5273n/XjO7+V8Cs+bPOejD9hthf5S0Mzcv8vAJWAvsD2U5DewBDwCbkia7Ragk38boJntAO4DRzo5AhvANUnXE9hmNmkBNpV7khCulXD+2xzzpbnUAAarEm9l3DmZL0xJsrggYcBxYDJ1JmgAOtAu2szA1o3zJ3adXY7GCAM+Bw5mTfL++wKzxTeYxQqRJOzMWL5wNKpkGLAcmRBJgrbZrFbLfPixwNe1L1RqvzCrp4ohmBjbfeZ22CkMmHnoqShCxnWrU61VcQNbXltisfzxxal8oa2KPQWMDqxUKdWGB4dHJa0EfV4BNqGeAYcl1dy3j4COa1zSlM+AjyUd9xnws6RRnwErkoZ8BjRJW3wGRFJjAvs6i/uAWXe/ll+/xN1K2FewZwq+XnnF5MubFNeLqRhyQzkmDlxl38j+RH6ZS3zl4cXUcAGRg7x1+m5mQHc+7/jSsEmAsVvdT6CxQf+rbVKJ1yVti251i0DjiONB+yRpZxRwGjjmAZxDiD2wuveYtitfD2Fjj/wDwFPgUA/BXOr4S5PrMbMR4EEPIR3cudhrZ6CamTklLzhDYA+QAwaTLEEplXcPBRXArfjvmsLcC66bQayO617KpP/dvA/YraTeK/gHeHT/KYoVBu0AAAAASUVORK5CYII="}}]);