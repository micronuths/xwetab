"use strict";(globalThis.webpackChunkinfinity_hitab_client=globalThis.webpackChunkinfinity_hitab_client||[]).push([[1847],{2211:(e,t,o)=>{o.d(t,{O:()=>a});var l=o(29445);const a=()=>{const e=(0,l.iH)(!1);return{fullScreen:e,setSullScreen:t=>{e.value=t}}}},27276:(e,t,o)=>{o.r(t);o(57334);var l=o(66155),a=o(68398),n=o(79282),r=o(43451),i=o(57268),s=o(29445),d=o(94209),c=o(34594),p=o(2211),u=o(81198);var x=o(17530),v=o(52861),g=o(9057),m=o(1585);const h=["data-id"],f={class:"flex w-[210px] items-center"},y=(e=>((0,i.dD)("data-v-0b8d57b2"),e=e(),(0,i.Cn)(),e))((()=>(0,i._)("div",{class:"icon h-[16px] w-[16px] shrink-0 bg-cover"},null,-1))),b=["readonly","disabled","value"],w={class:"w-[30px] text-right font-ali-75 text-color-t3"},S=(0,i.aZ)({__name:"group-list-item",props:{group:null,index:null},setup(e,t){let{expose:o}=t;const l=e,n=(0,v.useTodoStore)(),r=(0,s.iH)(!1),p=(0,s.iH)({edit:{text:"重命名",handler(){var e;I(),m.q$&&(null===(e=k.value)||void 0===e||e.focus())}},remove:{text:"删除",handler(){l.group.children.length>0?g.u.open({title:"提醒",message:"删除分组将同时删除分组下的所有待办事项。",okText:"删除",onOk:()=>{n.deleteGroup(l.group.id)}}):n.deleteGroup(l.group.id)}}}),{group:u,index:S}=(0,s.BK)(l),{activeGroupIndex:_,activeSearch:U}=(0,c.Iz)(),k=(0,s.iH)(null),{editMode:C,onClick:D,onBlur:T}=(0,c.Yt)(),I=()=>{var e;D(S.value),!m.q$&&(null===(e=k.value)||void 0===e||e.focus())};o({focus:I,id:l.group.id});const H=(0,i.Fl)((()=>{var e,t,o;return n.finishedShow?null===(e=u.value)||void 0===e||null===(t=e.children)||void 0===t?void 0:t.length:null===(o=u.value.children.filter((e=>!e.finished)))||void 0===o?void 0:o.length}));return(e,t)=>{const o=x.Z;return(0,i.wg)(),(0,i.iD)("section",{class:(0,d.normalizeClass)([[(0,s.SU)(C)?" cursor-auto bg-color-m2 bg-opacity-[0.06]":(0,s.SU)(S)!==(0,s.SU)(_)||(0,s.SU)(U)?"cursor-pointer bg-color-none":"active cursor-auto !bg-color-white dark:!bg-opacity-20",(0,s.SU)(n).dragGroupId===l.group.id?" opacity-50":""],"group relative mt-[4px] flex h-[36px] w-[260px] items-center justify-between rounded-[8px] px-[8px] leading-none transition-[background-color,box-shadow] hover:bg-color-m2 hover:bg-opacity-[0.06]"]),"data-id":l.group.id},[(0,i._)("div",f,[y,(0,i._)("div",{class:"",onMousedown:t[2]||(t[2]=e=>(e=>{var t;D(e),null===(t=k.value)||void 0===t||t.focus()})((0,s.SU)(S)))},[(0,i._)("input",{ref_key:"inputRef",ref:k,class:(0,d.normalizeClass)(["name-input text-dot select-none border-0 bg-color-none px-[8px] font-ali-65 text-color-t2 outline-0",[(0,s.SU)(C)?" cursor-auto bg-color-m2 bg-opacity-[0.06]":"pointer-events-none cursor-pointer bg-color-none"]]),readonly:!(0,s.SU)(C),disabled:(0,s.SU)(S)!==(0,s.SU)(_),spellcheck:"false",maxlength:"100",value:(0,s.SU)(u).name,type:"text",onKeyup:t[0]||(t[0]=(0,a.withKeys)((e=>(0,s.SU)(T)(e,(0,s.SU)(u))),["enter"])),onBlur:t[1]||(t[1]=e=>(0,s.SU)(T)(e,(0,s.SU)(u)))},null,42,b)],32)]),(0,i._)("div",{onClick:t[4]||(t[4]=(0,a.withModifiers)((()=>{}),["stop"]))},[(0,i.Wm)(o,{show:r.value,"onUpdate:show":t[3]||(t[3]=e=>r.value=e),class:"",options:(0,s.SU)(p)},{reference:(0,i.w5)((()=>[(0,i._)("button",{class:(0,d.normalizeClass)([(0,s.SU)(S)===(0,s.SU)(_)?"mb:!block":"",r.value?"block":(0,s.SU)(C)?"hidden":"hidden  group-hover:block"])},[(0,i._)("i",{class:(0,d.normalizeClass)([[r.value?"text-opacity-80":"text-opacity-60 hover:text-opacity-80"],"iconfont icon-single_hover_icon text-[20px] text-color-t1"])},null,2)],2)])),_:1},8,["show","options"])]),(0,i._)("span",w,(0,d.toDisplayString)((0,s.SU)(H)),1)],10,h)}}});var _=o(76911);const U=(0,_.Z)(S,[["__scopeId","data-v-0b8d57b2"]]);var k=o(49652);let C,D,T=0;const I=e=>((0,i.dD)("data-v-1efc991a"),e=e(),(0,i.Cn)(),e),H={class:"todo-modal-group p-[20px] pr-0"},B={class:"pre-group mt-[20px] flex w-[260px] justify-between"},Z=["onClick"],G={class:"text flex flex-col justify-between leading-none"},R={class:"font-ali-75 text-[16px] text-color-t3"},Y={class:"font-ali-65 text-color-t2"},z=I((()=>(0,i._)("div",{class:"icon h-[40px] w-[40px] rounded-[8px] bg-cover"},null,-1))),M={class:"mt-[24px] mb-[8px] w-[260px] text-center text-[12px] text-color-t3"},j=[I((()=>(0,i._)("i",{class:"iconfont icon-add_icon text-[16px] text-color-white"},null,-1)))],q=(0,i.aZ)({__name:"todo-modal-group",emits:["update:hideSideBar"],setup(e,t){let{emit:o}=t;const{itemRefs:l,setItemRef:n}=(()=>{const e=(0,s.iH)([]);return(0,i.Xn)((()=>{e.value=[]})),{setItemRef:t=>{t&&!e.value.find((e=>e.id===t.id))&&e.value.push(t)},itemRefs:e}})(),r=()=>{h(),(0,i.Y3)((()=>{f(l.value),K()}))},{searchValue:p,preGroup:x,customGroup:g,clickGroup:m,addGroup:h,editActive:f}=(0,c.Iz)();(0,i.bv)((()=>{b.value&&q()}));const y=(0,v.useTodoStore)(),b=(0,s.iH)();let w,S=0,_=0;const I=(0,s.iH)(!1),q=()=>{w=new k.O({dragRoot:b.value,dragSelector:".drag",dropRoot:b.value,dropSelector:".drop",dropLine:"y",withDragMoveStart:!0}),w.subscribe((e=>{switch(e.type){case"dragStart":I.value=!0;const{top:t,height:o}=b.value.getBoundingClientRect();S=t,_=t+o;break;case"dragMoveStart":const l=e.payload.dragElement.dataset.id;m(l),y.setDragGroupId(l),setTimeout((()=>{(e=>{let{y:t,dragElement:o}=e;const l=o.querySelector(".name-input");if(!l.readOnly&&!l.disabled)return;const{left:a,top:n,width:r,height:i}=o.getBoundingClientRect();T=t-n,C=o.cloneNode(!0),C.style.position="fixed",C.style.top="-999px",C.style.left=a+"px",C.style.width=r+"px",C.style.height=i+"px",C.style.pointerEvents="none",C.style.opacity="1",C.classList.add("fake"),D=document.querySelector(".todo-modal-group"),D.appendChild(C)})(e.payload)}),0);break;case"dragEnd":y.setDragGroupId(""),I.value=!1,O("stop"),C&&(D.removeChild(C),C=null);break;case"dragMove":(e=>{let{y:t,startMove:o}=e;if(!C)return;if(!o)return;const l=t-T;C.style.top=l+"px"})(e.payload),e.payload.y>_?O("bottom"):e.payload.y<S?O("top"):O("stop");break;case"drop":(e=>{let{dropElement:t}=e;if(!C)return;const o=(0,v.useTodoStore)();if(o.groupFlipping)return;const l=C.dataset.id,a=t.dataset.id;o.dragSortGroup(l,a)})(e.payload)}}))};let W=null;const O=e=>{window.clearInterval(W),"top"===e?W=window.setInterval((()=>{b.value.scrollBy(0,-6)}),30):"bottom"===e&&(W=window.setInterval((()=>{b.value.scrollBy(0,6)}),30))},K=()=>{o("update:hideSideBar",!0)},E=e=>{m(e),K()};return(e,t)=>{const o=u.Z;return(0,i.wg)(),(0,i.iD)("section",H,[(0,i.Wm)(o,{value:(0,s.SU)(p),"onUpdate:value":t[0]||(t[0]=e=>(0,s.dq)(p)?p.value=e:null),icon:"icon-magnifier_icon  !text-color-t2",placeholder:"搜索","always-show-close-btn":"",class:"search-input mt-[36px] w-[260px] flex-1"},null,8,["value","placeholder"]),(0,i._)("div",B,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)((0,s.SU)(x),(e=>((0,i.wg)(),(0,i.iD)("div",{key:e.type,class:(0,d.normalizeClass)(["item flex h-[60px] w-[124px] cursor-pointer justify-between rounded-[8px] bg-color-b4 p-[10px] pl-[16px] transition-[box-shadow,background-color]",e.class]),onClick:t=>E(e.type)},[(0,i._)("div",G,[(0,i._)("span",R,(0,d.toDisplayString)(e.num),1),(0,i._)("span",Y,(0,d.toDisplayString)(e.title),1)]),z],10,Z)))),128))]),(0,i._)("div",M,(0,d.toDisplayString)("我的列表"),1),(0,i._)("div",{ref_key:"wrapperRef",ref:b,class:"custom-group hi-scroll pb-[12px]"},[(0,i.Wm)(a.TransitionGroup,{name:I.value?"list":void 0},{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)((0,s.SU)(g),((e,t)=>((0,i.wg)(),(0,i.j4)(U,{ref_for:!0,ref:(0,s.SU)(n),key:e.id,class:"drag drop group-list-item",group:e,index:t,onClick:t=>E(e.id)},null,8,["group","index","onClick"])))),128))])),_:1},8,["name"])],512),(0,i._)("div",{class:"absolute bottom-[20px] left-[20px] flex h-[28px] w-[28px] cursor-pointer items-center justify-center rounded-[8px] bg-color-t3 leading-none",onClick:r},j)])}}}),W=(0,_.Z)(q,[["__scopeId","data-v-1efc991a"]]);var O=o(35427),K=o(23709),E=o(6704),F=o(80661),L=o.n(F),$=o(88309);const A={class:"flex flex-grow border-b-[1px] border-color-m2 border-opacity-[0.08]"},P=["data-id"],N={class:"w-full pr-[10px]"},V=["value","readonly"],Q={key:0,class:"mb-[6px] flex items-center leading-none text-color-t3"},X={class:"mr-[12px]"},J={class:"mt-[8px] flex h-[22px] w-[46px] justify-center"},ee={class:"hi-select-menu overflow-hidden rounded-[8px] bg-color-b5 p-[4px] shadow-popover"},te=["onClick"],oe={class:"box h-[392px] w-[352px] cursor-default rounded-[8px] bg-color-b5"},le={class:"flex h-[48px] items-center justify-between border-b-[1px] border-color-m2 border-opacity-[0.05] px-[16px] text-color-t2"},ae=(0,i.aZ)({__name:"todo-list-item",props:{todo:null},setup(e){const t=e,o=(0,v.useTodoStore)(),l=(0,s.iH)(),a=(0,s.iH)(!1),n=(0,s.iH)(!1);(0,i.bv)((()=>{setTimeout((()=>{n.value=!0}),600)}));const r=e=>{a.value=!1,o.saveTodo({...t.todo,expire:e.valueOf()})},p=(0,i.Fl)((()=>{var e,t;const o=(null===(e=l.value)||void 0===e||null===(t=e.getBoundingClientRect())||void 0===t?void 0:t.top)??0;return a.value&&o>window.innerHeight/2?"top-end":"bottom-end"})),u=(0,i.Fl)({set(e){o.saveTodo({...t.todo,repeat:e})},get:()=>f.value.repeat??"norepeat"}),g=(0,s.iH)({norepeat:{text:"不重复"},day:{text:"每天"},week:{text:"每周"},month:{text:"每月"}}),m=(0,i.Fl)((()=>({edit:{text:f.value.expire?"修改时间":"添加时间",handler(){h.value=!1,a.value=!0}},clear:f.value.expire?{text:"取消时间",handler(){h.value=!1,o.saveTodo({...t.todo,expire:void 0})}}:null,remove:{text:"删除",handler(){h.value=!1,o.deleteTodo(t.todo.id)}}}))),h=(0,s.iH)(!1),{todo:f}=(0,s.BK)(t),{clickFinish:y,inputChange:b,editMode:w,onBlur:S,onClick:_}=(0,c.gT)(),U=()=>{var e;_(),null===(e=l.value)||void 0===e||e.focus()};return(e,c)=>{const v=E.Z,_=x.Z,k=K.Z,C=(0,i.Q2)("autoheight");return(0,i.wg)(),(0,i.iD)("section",{class:(0,d.normalizeClass)([[(0,s.SU)(o).dragTodoId===t.todo.id?" opacity-50":""],"todo-list-item group flex w-full px-[16px] pt-[10px]"])},[(0,i.Wm)(v,{checked:(0,s.SU)(f).finished,class:"mt-[8px]",onClick:c[0]||(c[0]=e=>n.value&&(0,s.SU)(y)((0,s.SU)(f)))},null,8,["checked"]),(0,i._)("div",A,[(0,i._)("div",{"data-id":t.todo.id,class:"drag drop relative ml-[12px] flex-grow pb-[10px]"},[(0,i._)("div",N,[(0,i._)("div",{class:"box",onClick:U},[(0,i.wy)((0,i._)("textarea",{ref_key:"textareaRef",ref:l,value:(0,s.SU)(f).content,rows:"1",spellcheck:"false",readonly:!(0,s.SU)(w),class:(0,d.normalizeClass)([[(0,s.SU)(f).finished?"text-color-t3":"text-color-t2",(0,s.SU)(w)?"bg-color-m2 bg-opacity-[0.06]":"pointer-events-none bg-color-none"],"todo-content ml-[-8px] w-full cursor-auto resize-none break-all rounded-[8px] border-0 py-[6px] px-[8px] align-top font-ali-65 leading-[23px] outline-0"]),maxlength:"1000",onBlur:c[1]||(c[1]=e=>(0,s.SU)(S)(e,(0,s.SU)(f))),onInput:c[2]||(c[2]=e=>(0,s.SU)(b)(e.target,115))},null,42,V),[[C,{max:115,id:(0,s.SU)(f).id,min:35}]])])]),(0,s.SU)(f).expire?((0,i.wg)(),(0,i.iD)("div",Q,[(0,i._)("i",{class:(0,d.normalizeClass)([[{"text-color-orange":(0,s.SU)(L())((0,s.SU)(f).expire).isBefore((0,s.SU)(L())())}],"iconfont icon-reminder_time mr-[4px] text-[20px]"])},null,2),(0,i._)("span",X,(0,d.toDisplayString)((0,s.SU)(L())((0,s.SU)(f).expire).format("YYYY-MM-DD HH:mm")),1),(0,i._)("span",null,(0,d.toDisplayString)(g.value[(0,s.SU)(f).repeat??"norepeat"].text),1)])):(0,i.kq)("",!0)],8,P),(0,i._)("div",J,[(0,i.Wm)(_,{show:h.value,"onUpdate:show":c[3]||(c[3]=e=>h.value=e),"show-refrence":(0,s.SU)(w)},{default:(0,i.w5)((()=>[(0,i._)("div",ee,[(0,i._)("div",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)((0,s.SU)(m),((e,t)=>((0,i.wg)(),(0,i.iD)(i.HY,{key:t},[e?((0,i.wg)(),(0,i.iD)("button",{key:0,type:"button",class:"h-[32px] w-full cursor-pointer rounded-[4px] px-[16px] text-left text-[14px] text-color-t2 hover:bg-color-m2 hover:bg-opacity-[0.06] hover:text-color-t1 not-last:mb-[4px]",onClick:t=>e.handler()},(0,d.toDisplayString)(e.text),9,te)):(0,i.kq)("",!0)],64)))),128))])])])),reference:(0,i.w5)((()=>[(0,i._)("button",{class:(0,d.normalizeClass)(h.value||a.value?"block":"hidden  group-hover:block")},[(0,i._)("i",{class:(0,d.normalizeClass)([[h.value||a.value?"text-opacity-80":"text-opacity-60 hover:text-opacity-80"],"iconfont icon-single_hover_icon text-[20px] text-color-t1"])},null,2)],2)])),_:1},8,["show","show-refrence"]),(0,i.Wm)(_,{show:a.value,"onUpdate:show":c[6]||(c[6]=e=>a.value=e),placement:(0,s.SU)(p)},{default:(0,i.w5)((()=>[(0,i._)("div",oe,[(0,i._)("div",le,[(0,i._)("div",null,(0,d.toDisplayString)("重复规则"),1),(0,i.Wm)(k,{value:(0,s.SU)(u),"onUpdate:value":c[4]||(c[4]=e=>(0,s.dq)(u)?u.value=e:null),options:g.value,"onUpdate:show":c[5]||(c[5]=()=>a.value=!0)},null,8,["value","options"])]),(0,i.Wm)($.Z,{show:a.value,"show-time":!0,onOnFinish:r},null,8,["show"])])])),_:1},8,["show","placement"])])])],2)}}}),ne=(0,_.Z)(ae,[["__scopeId","data-v-3377bbe2"]]);let re,ie,se=0;const de=e=>((0,i.dD)("data-v-3b7ad7ea"),e=e(),(0,i.Cn)(),e),ce={class:"todo-modal-content flex flex-col justify-between"},pe=[de((()=>(0,i._)("i",{class:"icon iconfont icon-toggle_s text-[16px] text-color-t1"},null,-1)))],ue={class:"max-h-[calc(100%_-_76px)] grow"},xe={class:"flex h-[64px] items-center justify-between border-b-[1px] border-color-m2 border-opacity-[0.08] px-[16px]"},ve={class:"flex h-[40px] w-[360px] items-center justify-between rounded-[8px] bg-color-m2 bg-opacity-[0.08] pl-[12px] pr-[6px]"},ge={class:"flex items-center"},me={class:"text-color-t3"},he=de((()=>(0,i._)("div",{class:"mx-[4px] h-[4px] w-[4px] rounded-[50%] bg-color-t3"},null,-1))),fe={key:1,class:"h-full"},ye={key:0},be={key:0,class:"add-todo bottom-0 h-[76px] w-full flex-shrink-0 p-[16px] mb:flex mb:items-center"},we=(0,i.aZ)({__name:"todo-modal-content",emits:["update:hideSideBar"],setup(e,t){let{emit:o}=t;const l=(0,s.iH)(),n=(0,v.useTodoStore)(),{title:r,completed:p,finishedShow:x,changeFinishedShow:g,clearCompleted:m,newTodoContent:h,addTodo:f}=(0,c.TW)(),y=[{type:"overdue",title:"已过期"},{type:"today",title:"今天"},{type:"tomorrow",title:"明天"},{type:"week",title:"本周内"},{type:"nextweek",title:"下周"},{type:"month",title:"本月"},{type:"nextmonth",title:"下个月"},{type:"later",title:"更远"}];let b;(0,i.bv)((()=>{l.value&&_()}));let w=0,S=0;const _=()=>{b=new k.O({dragRoot:l.value,dragSelector:".drag",dropRoot:l.value,dropSelector:".drop",dropLine:"y",withDragMoveStart:!0}),b.subscribe((e=>{if(!n.activeSearch&&"number"==typeof n.activeGroupIndex)switch(e.type){case"dragStart":const{top:t,height:o}=l.value.getBoundingClientRect();w=t,S=t+o;break;case"dragMoveStart":const a=e.payload.dragElement.dataset.id;n.setDragTodoId(a),(e=>{let{y:t,dragElement:o}=e;const l=o.querySelector(".todo-content");if(!l.readOnly&&!l.disabled)return;const{left:a,top:n,width:r,height:i}=o.getBoundingClientRect();se=t-n,re=o.cloneNode(!0),re.style.position="fixed",re.style.top="-999px",re.style.left=a+"px",re.style.width=r+"px",re.style.height=i+"px",re.style.pointerEvents="none",re.style.borderBottomWidth="0",re.style.marginLeft="0",re.classList.add("fake"),ie=document.querySelector(".todo-modal-content"),ie.appendChild(re)})(e.payload);break;case"dragEnd":n.setDragTodoId(""),C("stop"),re&&(ie.removeChild(re),re=null);break;case"dragMove":(e=>{let{y:t,startMove:o}=e;if(!re)return;if(!o)return;const l=t-se;re.style.top=l+"px"})(e.payload),e.payload.y>S?C("bottom"):e.payload.y<w?C("top"):C("stop");break;case"drop":(e=>{let{dropElement:t}=e;if(!re)return;const o=(0,v.useTodoStore)();if(o.todoFlipping)return;const l=re.dataset.id,a=t.dataset.id;o.dragSortTodo(l,a)})(e.payload)}}))};let U=null;const C=e=>{window.clearInterval(U),"top"===e?U=window.setInterval((()=>{l.value.scrollBy(0,-6)}),30):"bottom"===e&&(U=window.setInterval((()=>{l.value.scrollBy(0,6)}),30))},D=()=>{o("update:hideSideBar",!1)};return(e,t)=>{const o=O.Z,c=u.Z;return(0,i.wg)(),(0,i.iD)("section",ce,[(0,i._)("div",{class:"top-bar hidden w-full p-[15px]"},[(0,i._)("button",{class:"rounded-[6px] bg-color-m2 bg-opacity-10 p-[6px]",onClick:D},pe)]),(0,i._)("div",ue,[(0,i._)("div",xe,[(0,i._)("div",{class:"text-dot font-ali-75 text-[18px] text-color-t1",onClick:D},(0,d.toDisplayString)((0,s.SU)(r)),1),(0,i._)("div",ve,[(0,i._)("div",ge,[(0,i._)("span",me,(0,d.toDisplayString)((0,s.SU)(p))+" "+(0,d.toDisplayString)("已完成"),1),he,(0,i._)("span",{class:"cursor-pointer p-[4px] text-color-todo-t2",onClick:t[0]||(t[0]=function(){return(0,s.SU)(m)&&(0,s.SU)(m)(...arguments)})},(0,d.toDisplayString)("清理"),1)]),(0,i.Wm)(o,{class:"h-[28px] w-auto rounded-[4px] px-[16px]",type:"primary",onClick:(0,s.SU)(g)},{default:(0,i.w5)((()=>[(0,i.Uk)((0,d.toDisplayString)((0,s.SU)(x)?"隐藏":"显示"),1)])),_:1},8,["onClick"])])]),(0,i._)("div",{ref_key:"wrapperRef",ref:l,class:(0,d.normalizeClass)(["today"===(0,s.SU)(n).activeGroupIndex?"h-full":"todo-list-box","hi-scroll relative pt-[8px]"])},["task"!==(0,s.SU)(n).activeGroupIndex||(0,s.SU)(n).activeSearch?((0,i.wg)(),(0,i.j4)(a.TransitionGroup,{key:0,name:(0,s.SU)(n).needTransition?"todo-list":"list",class:"",tag:"div"},{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)((0,s.SU)(n).currentTodoList,(e=>((0,i.wg)(),(0,i.j4)(ne,{key:e.id,todo:e},null,8,["todo"])))),128))])),_:1},8,["name"])):(0,i.kq)("",!0),"task"!==(0,s.SU)(n).activeGroupIndex||(0,s.SU)(n).activeSearch?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("div",fe,[((0,i.wg)(),(0,i.iD)(i.HY,null,(0,i.Ko)(y,(e=>(0,i._)("div",{key:e.type},[(0,s.SU)(n).timelineList[e.type].length?((0,i.wg)(),(0,i.iD)("div",ye,[(0,i._)("div",{class:(0,d.normalizeClass)(["mt-[16px] mb-[4px] ml-[12px] text-[16px]","overdue"===e.type?"text-color-orange":"today"===e.type?"text-color-blue":"text-color-t2"])},(0,d.toDisplayString)(e.title),3),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)((0,s.SU)(n).timelineList[e.type],(e=>((0,i.wg)(),(0,i.j4)(ne,{key:e.id,todo:e},null,8,["todo"])))),128))])):(0,i.kq)("",!0)]))),64))]))],2)]),"number"==typeof(0,s.SU)(n).activeGroupIndex?((0,i.wg)(),(0,i.iD)("div",be,[(0,i.Wm)(c,{value:(0,s.SU)(h),"onUpdate:value":t[1]||(t[1]=e=>(0,s.dq)(h)?h.value=e:null),icon:"icon-pen_icon !text-color-todo-t2",placeholder:"添加待办",class:"mb:flex-1","no-clear-btn":"",onKeyup:t[2]||(t[2]=(0,a.withKeys)((e=>(0,s.SU)(f)(l.value)),["enter"]))},null,8,["value","placeholder"]),(0,i._)("p",{class:(0,d.normalizeClass)(["ml-[10px] hidden text-[16px] leading-[22px] text-color-todo-t2 mb:block",[{"!text-color-t4":!(0,s.SU)(h)}]]),onClick:t[3]||(t[3]=e=>(0,s.SU)(f)(l.value))},(0,d.toDisplayString)("添加"),3)])):(0,i.kq)("",!0)])}}}),Se=(0,_.Z)(we,[["__scopeId","data-v-3b7ad7ea"]]);var _e=o(20259);const Ue={class:"content flex h-full w-full flex-row-reverse"},ke=(0,i.aZ)({__name:"widget-todo-modal",setup(e){const{onCloseModal:t}=(0,c.dd)(),{fullScreen:o,setSullScreen:l}=(0,p.O)(),{show:a}=(0,c.dd)(),u=(0,s.iH)(!0);let x;(0,i.YP)(o,(()=>{(0,i.Y3)((()=>{_e.U.cxecutor()}))})),(0,i.YP)(a,(e=>{e&&(0,i.Y3)((()=>{_e.U.cxecutor()}))}));const g=(0,v.useTodoStore)(),m=()=>{x&&clearTimeout(x);const e=g.unfinishedTaskList.filter((e=>L()(e.expire).isAfter(L()()))),t=null==e?void 0:e[0];if(null!=t&&t.expire){const e=t.expire-L()().valueOf();x=setTimeout((()=>{g.refreshView(),m()}),e)}};return(0,i.YP)((()=>g.todos),(()=>{m()})),(e,c)=>{const p=r.Z,x=n.Z;return(0,i.wg)(),(0,i.j4)(x,{class:"widget-todo-modal",ani:"fade",show:(0,s.SU)(a)},{default:(0,i.w5)((()=>[(0,i.Wm)(p,{class:"","full-screen":(0,s.SU)(o),onOnClose:(0,s.SU)(t),onOnFullscreen:c[2]||(c[2]=e=>(0,s.SU)(l)(e))},{default:(0,i.w5)((()=>[(0,i._)("div",Ue,[(0,i.Wm)(Se,{"hide-side-bar":u.value,"onUpdate:hide-side-bar":c[0]||(c[0]=e=>u.value=e),class:"todo-modal-content h-full grow"},null,8,["hide-side-bar"]),(0,i.Wm)(W,{"hide-side-bar":u.value,"onUpdate:hide-side-bar":c[1]||(c[1]=e=>u.value=e),class:(0,d.normalizeClass)(["todo-modal h-full w-[300px] border-r-[1px] border-color-t1 border-opacity-[0.08] bg-color-b3",[{"todo-modal-show":!u.value}]])},null,8,["hide-side-bar","class"])])])),_:1},8,["full-screen","onOnClose"])])),_:1},8,["show"])}}}),Ce=(0,_.Z)(ke,[["__scopeId","data-v-4be09f96"]]);var De=o(96755),Te=o(75008),Ie=o(63477);(()=>{const e=(0,Ie.em)(),t=(0,a.createApp)(Ce);t.directive("autoheight",{mounted:(e,t)=>{const{max:o,min:l,id:a}=t.value;(0,_e.$)(e,o,l),_e.U.register(a,(()=>(0,_e.$)(e,o,l)))},unmounted(e,t){const{id:o}=t.value;_e.U.unRegister(o)},updated:(e,t)=>{const{max:o,min:l}=t.value;(0,_e.$)(e,o,l)}}),(0,Te.f)(t),t.use(De.M),t.use(l.Z),t.mount(e)})()}}]);