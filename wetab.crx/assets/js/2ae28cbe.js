"use strict";(globalThis.webpackChunkinfinity_hitab_client=globalThis.webpackChunkinfinity_hitab_client||[]).push([[9621],{78481:(e,t,a)=>{a.d(t,{_:()=>m,pg:()=>v,zu:()=>f});var i=a(74003),l=a(17904),u=a(63477);const m=async e=>{try{var t;const a=await l.hj.get(`${i.H}stock/hq`,{codes:e},{_delay:0,_notDevtool:!0});if(0===a.rc&&(null===(t=a.data.diff)||void 0===t?void 0:t.length)>0)return[null,a.data.diff];throw a}catch(e){return["catch error"]}},v=async e=>{try{const t=await l.hj.get(`${i.H}stock/search`,{key:e},{_delay:0});if(t.QuotationCodeTable.Data&&t.QuotationCodeTable.Data.length>0)return[null,t.QuotationCodeTable.Data];throw t}catch(e){return["catch error"]}},f=async e=>{try{const t=await l.hj.get(`${i.H}stock/kline`,e,{_delay:0,_notDevtool:!0});if(0===t.rc&&t.data.klines)return[null,t.data.klines];throw t}catch(e){return["catch error"]}};new u._P("stock/chart-data",18e5)},39621:(e,t,a)=>{a.r(t),a.d(t,{useStockStore:()=>n});const i=[{QuoteID:"1.000001",Code:"000001",Name:"上证指数",Classify:"Index",MktNum:"1",SecurityTypeName:"指数",trend:"up"},{QuoteID:"0.399001",Code:"399001",Name:"深证成指",Classify:"Index",MktNum:"0",SecurityTypeName:"指数",trend:"up"},{QuoteID:"0.399006",Code:"399006",Name:"创业板指",Classify:"Index",MktNum:"0",SecurityTypeName:"指数",trend:"up"},{QuoteID:"100.HSI",Code:"HSI",Name:"恒生指数",Classify:"HK",MktNum:"100",SecurityTypeName:"指数",trend:"down"}],l={1.000001:{f1:2,f2:3290.99,f3:-.6,f4:-19.75,f5:322479410,f6:385386011202.3,f7:1.07,f8:.75,f9:0,f10:.76,f11:.04,f12:"000001",f13:1,f14:"上证指数",f15:3317.9,f16:3282.49,f17:3310.16,f18:3310.74,f19:1,f20:50187217121809,f21:43854276516181,f22:.01,f23:0,f24:.32,f25:6.53,f26:0,f27:1,f28:0,f29:2,f30:592412,f31:0,f32:0,f33:0,f34:145663452,f35:176815958,f36:0,f37:0,f38:4828122202934,f39:4312795316367,f40:0,f41:0,f42:0,f43:0,f44:0,f45:0,f46:0,f47:0,f48:0,f49:0,f50:0,f115:0},.399001:{f1:2,f2:11099.26,f3:-.71,f4:-79.36,f5:353743511,f6:480886438964.4614,f7:1.01,f8:1.58,f9:0,f10:.88,f11:.02,f12:"399001",f13:0,f14:"深证成指",f15:11182.36,f16:11069.44,f17:11182.36,f18:11178.62,f19:5,f20:33484623097980,f21:27474554564974,f22:.01,f23:0,f24:-8,f25:.76,f26:0,f27:0,f28:0,f29:2,f30:1136211,f31:0,f32:0,f33:0,f34:238052662,f35:115690850,f36:0,f37:0,f38:2596022621579,f39:2238221923913,f40:0,f41:0,f42:0,f43:0,f44:0,f45:0,f46:0,f47:0,f48:0,f49:0,f50:0,f115:0},.399006:{f1:2,f2:2294.19,f3:-.25,f4:-5.74,f5:128632072,f6:220553854690.12,f7:.91,f8:2.85,f9:0,f10:.93,f11:.06,f12:"399006",f13:0,f14:"创业板指",f15:2307.17,f16:2286.23,f17:2300.8,f18:2299.93,f19:5,f20:0xad4e53a8b07,f21:8532183586524,f22:.03,f23:0,f24:-9.93,f25:-2.24,f26:0,f27:0,f28:0,f29:2,f30:1136211,f31:0,f32:0,f33:0,f34:59302500,f35:69329572,f36:0,f37:0,f38:583330613303,f39:450862025845,f40:0,f41:0,f42:0,f43:0,f44:0,f45:0,f46:0,f47:0,f48:0,f49:0,f50:0,f115:0},"100.HSI":{f1:2,f2:19978.25,f3:.04,f4:7.12,f5:9998741248,f6:78390419456,f7:1.46,f8:0,f9:0,f10:.97,f11:.05,f12:"HSI",f13:100,f14:"恒生指数",f15:20183.28,f16:19891.49,f17:20183.28,f18:19971.13,f19:0,f20:0,f21:0,f22:.07,f23:0,f24:-4.01,f25:1,f26:0,f27:305,f28:19971.13,f29:2,f30:0,f31:0,f32:0,f33:0,f34:7534674432,f35:2464066816,f36:0,f37:0,f38:0,f39:0,f40:0,f41:0,f42:0,f43:0,f44:0,f45:0,f46:0,f47:0,f48:0,f49:0,f50:0,f115:0}},u={.399001:{updateTime:0,data:[{time:"2023-05-15 14:05",value:11110.24},{time:"2023-05-15 14:10",value:11112.96},{time:"2023-05-15 14:15",value:11140.95},{time:"2023-05-15 14:20",value:11141.32},{time:"2023-05-15 14:25",value:11148.4},{time:"2023-05-15 14:30",value:11153.41},{time:"2023-05-15 14:35",value:11157.94},{time:"2023-05-15 14:40",value:11167.37},{time:"2023-05-15 14:45",value:11165.62},{time:"2023-05-15 14:50",value:11168.85},{time:"2023-05-15 14:55",value:11173.52},{time:"2023-05-15 15:00",value:11178.62},{time:"2023-05-16 09:35",value:11145.84},{time:"2023-05-16 09:40",value:11149.3},{time:"2023-05-16 09:45",value:11145.08},{time:"2023-05-16 09:50",value:11154.17},{time:"2023-05-16 09:55",value:11153.29},{time:"2023-05-16 10:00",value:11148.66},{time:"2023-05-16 10:05",value:11123.62},{time:"2023-05-16 10:10",value:11116.43},{time:"2023-05-16 10:15",value:11118.81},{time:"2023-05-16 10:20",value:11126.11},{time:"2023-05-16 10:25",value:11126.65},{time:"2023-05-16 10:30",value:11138.2},{time:"2023-05-16 10:35",value:11136.35},{time:"2023-05-16 10:40",value:11139.17},{time:"2023-05-16 10:45",value:11138.33},{time:"2023-05-16 10:50",value:11129.3},{time:"2023-05-16 10:55",value:11127.31},{time:"2023-05-16 11:00",value:11129.18},{time:"2023-05-16 11:05",value:11147.06},{time:"2023-05-16 11:10",value:11144.23},{time:"2023-05-16 11:15",value:11144.48},{time:"2023-05-16 11:20",value:11138.25},{time:"2023-05-16 11:25",value:11140.34},{time:"2023-05-16 11:30",value:11144.28},{time:"2023-05-16 13:05",value:11131.82},{time:"2023-05-16 13:10",value:11130.45},{time:"2023-05-16 13:15",value:11131.01},{time:"2023-05-16 13:20",value:11133.07},{time:"2023-05-16 13:25",value:11135.26},{time:"2023-05-16 13:30",value:11136.85},{time:"2023-05-16 13:35",value:11124.36},{time:"2023-05-16 13:40",value:11126.34},{time:"2023-05-16 13:45",value:11121.32},{time:"2023-05-16 13:50",value:11121.18},{time:"2023-05-16 13:55",value:11103.7},{time:"2023-05-16 14:00",value:11100.54},{time:"2023-05-16 14:05",value:11099.9},{time:"2023-05-16 14:10",value:11097.52},{time:"2023-05-16 14:15",value:11114.3},{time:"2023-05-16 14:20",value:11115.72},{time:"2023-05-16 14:25",value:11112.36},{time:"2023-05-16 14:30",value:11101.09},{time:"2023-05-16 14:35",value:11088.47},{time:"2023-05-16 14:40",value:11071.12},{time:"2023-05-16 14:45",value:11076.21},{time:"2023-05-16 14:50",value:11087.25},{time:"2023-05-16 14:55",value:11096.61},{time:"2023-05-16 15:00",value:11099.26}]},.399006:{updateTime:0,data:[{time:"2023-05-15 14:05",value:2280.49},{time:"2023-05-15 14:10",value:2280.51},{time:"2023-05-15 14:15",value:2288.33},{time:"2023-05-15 14:20",value:2289.06},{time:"2023-05-15 14:25",value:2290.67},{time:"2023-05-15 14:30",value:2291.83},{time:"2023-05-15 14:35",value:2292.72},{time:"2023-05-15 14:40",value:2295.17},{time:"2023-05-15 14:45",value:2295.94},{time:"2023-05-15 14:50",value:2298.76},{time:"2023-05-15 14:55",value:2299.26},{time:"2023-05-15 15:00",value:2299.93},{time:"2023-05-16 09:35",value:2295.1},{time:"2023-05-16 09:40",value:2302.08},{time:"2023-05-16 09:45",value:2301.14},{time:"2023-05-16 09:50",value:2303.71},{time:"2023-05-16 09:55",value:2305.65},{time:"2023-05-16 10:00",value:2302.93},{time:"2023-05-16 10:05",value:2298.4},{time:"2023-05-16 10:10",value:2297.11},{time:"2023-05-16 10:15",value:2298.82},{time:"2023-05-16 10:20",value:2299.87},{time:"2023-05-16 10:25",value:2298.59},{time:"2023-05-16 10:30",value:2300.16},{time:"2023-05-16 10:35",value:2298.09},{time:"2023-05-16 10:40",value:2298.56},{time:"2023-05-16 10:45",value:2297.54},{time:"2023-05-16 10:50",value:2297.18},{time:"2023-05-16 10:55",value:2296.42},{time:"2023-05-16 11:00",value:2298},{time:"2023-05-16 11:05",value:2302.23},{time:"2023-05-16 11:10",value:2301.87},{time:"2023-05-16 11:15",value:2299.83},{time:"2023-05-16 11:20",value:2299.22},{time:"2023-05-16 11:25",value:2299.56},{time:"2023-05-16 11:30",value:2300.5},{time:"2023-05-16 13:05",value:2296.78},{time:"2023-05-16 13:10",value:2297.11},{time:"2023-05-16 13:15",value:2296.24},{time:"2023-05-16 13:20",value:2296.25},{time:"2023-05-16 13:25",value:2296.42},{time:"2023-05-16 13:30",value:2298.51},{time:"2023-05-16 13:35",value:2295.09},{time:"2023-05-16 13:40",value:2296.63},{time:"2023-05-16 13:45",value:2297.04},{time:"2023-05-16 13:50",value:2297.2},{time:"2023-05-16 13:55",value:2293.16},{time:"2023-05-16 14:00",value:2291.94},{time:"2023-05-16 14:05",value:2291.81},{time:"2023-05-16 14:10",value:2291.83},{time:"2023-05-16 14:15",value:2295.29},{time:"2023-05-16 14:20",value:2296.33},{time:"2023-05-16 14:25",value:2295.33},{time:"2023-05-16 14:30",value:2292.93},{time:"2023-05-16 14:35",value:2290.52},{time:"2023-05-16 14:40",value:2287.27},{time:"2023-05-16 14:45",value:2288.13},{time:"2023-05-16 14:50",value:2290.92},{time:"2023-05-16 14:55",value:2292.78},{time:"2023-05-16 15:00",value:2294.19}]},1.000001:{updateTime:0,data:[{time:"2023-05-15 14:05",value:3293.12},{time:"2023-05-15 14:10",value:3294.27},{time:"2023-05-15 14:15",value:3303.24},{time:"2023-05-15 14:20",value:3301.21},{time:"2023-05-15 14:25",value:3301.39},{time:"2023-05-15 14:30",value:3304.5},{time:"2023-05-15 14:35",value:3306.08},{time:"2023-05-15 14:40",value:3308.47},{time:"2023-05-15 14:45",value:3307.23},{time:"2023-05-15 14:50",value:3307.08},{time:"2023-05-15 14:55",value:3308.93},{time:"2023-05-15 15:00",value:3310.74},{time:"2023-05-16 09:35",value:3307.29},{time:"2023-05-16 09:40",value:3309.45},{time:"2023-05-16 09:45",value:3307.75},{time:"2023-05-16 09:50",value:3312.5},{time:"2023-05-16 09:55",value:3306.97},{time:"2023-05-16 10:00",value:3302.85},{time:"2023-05-16 10:05",value:3301.31},{time:"2023-05-16 10:10",value:3299.02},{time:"2023-05-16 10:15",value:3302.66},{time:"2023-05-16 10:20",value:3304.58},{time:"2023-05-16 10:25",value:3307.45},{time:"2023-05-16 10:30",value:3310.63},{time:"2023-05-16 10:35",value:3316.13},{time:"2023-05-16 10:40",value:3313.85},{time:"2023-05-16 10:45",value:3315.5},{time:"2023-05-16 10:50",value:3308.33},{time:"2023-05-16 10:55",value:3309.1},{time:"2023-05-16 11:00",value:3310.03},{time:"2023-05-16 11:05",value:3313.29},{time:"2023-05-16 11:10",value:3308.6},{time:"2023-05-16 11:15",value:3308.86},{time:"2023-05-16 11:20",value:3306.81},{time:"2023-05-16 11:25",value:3310.47},{time:"2023-05-16 11:30",value:3311.06},{time:"2023-05-16 13:05",value:3308.4},{time:"2023-05-16 13:10",value:3308.22},{time:"2023-05-16 13:15",value:3306.45},{time:"2023-05-16 13:20",value:3305.73},{time:"2023-05-16 13:25",value:3306.54},{time:"2023-05-16 13:30",value:3305.96},{time:"2023-05-16 13:35",value:3302.92},{time:"2023-05-16 13:40",value:3301.81},{time:"2023-05-16 13:45",value:3298.14},{time:"2023-05-16 13:50",value:3299.54},{time:"2023-05-16 13:55",value:3292.69},{time:"2023-05-16 14:00",value:3291.14},{time:"2023-05-16 14:05",value:3290.86},{time:"2023-05-16 14:10",value:3290.51},{time:"2023-05-16 14:15",value:3294.94},{time:"2023-05-16 14:20",value:3295.9},{time:"2023-05-16 14:25",value:3295.75},{time:"2023-05-16 14:30",value:3291.75},{time:"2023-05-16 14:35",value:3288.26},{time:"2023-05-16 14:40",value:3283.22},{time:"2023-05-16 14:45",value:3284.69},{time:"2023-05-16 14:50",value:3287.84},{time:"2023-05-16 14:55",value:3289.67},{time:"2023-05-16 15:00",value:3290.99}]},"100.HSI":{updateTime:0,data:[{time:"2023-05-16 10:05",value:20031.91},{time:"2023-05-16 10:10",value:20044.08},{time:"2023-05-16 10:15",value:20057.99},{time:"2023-05-16 10:20",value:20062.12},{time:"2023-05-16 10:25",value:20072.14},{time:"2023-05-16 10:30",value:20089.17},{time:"2023-05-16 10:35",value:20090.42},{time:"2023-05-16 10:40",value:20083.16},{time:"2023-05-16 10:45",value:20069.36},{time:"2023-05-16 10:50",value:20057.48},{time:"2023-05-16 10:55",value:20075.33},{time:"2023-05-16 11:00",value:20074.58},{time:"2023-05-16 11:05",value:20090.49},{time:"2023-05-16 11:10",value:20079.96},{time:"2023-05-16 11:15",value:20079.33},{time:"2023-05-16 11:20",value:20064.7},{time:"2023-05-16 11:25",value:20065.57},{time:"2023-05-16 11:30",value:20058.85},{time:"2023-05-16 11:35",value:20050.33},{time:"2023-05-16 11:40",value:20056.38},{time:"2023-05-16 11:45",value:20058.14},{time:"2023-05-16 11:50",value:20051.83},{time:"2023-05-16 11:55",value:20051.5},{time:"2023-05-16 12:00",value:20049.34},{time:"2023-05-16 13:05",value:20014.07},{time:"2023-05-16 13:10",value:20010.31},{time:"2023-05-16 13:15",value:20015.88},{time:"2023-05-16 13:20",value:20004.01},{time:"2023-05-16 13:25",value:19989.25},{time:"2023-05-16 13:30",value:20005.67},{time:"2023-05-16 13:35",value:19990.94},{time:"2023-05-16 13:40",value:20000.47},{time:"2023-05-16 13:45",value:19996.59},{time:"2023-05-16 13:50",value:19986.16},{time:"2023-05-16 13:55",value:19966.63},{time:"2023-05-16 14:00",value:19946.17},{time:"2023-05-16 14:05",value:19948.92},{time:"2023-05-16 14:10",value:19933.95},{time:"2023-05-16 14:15",value:19967.12},{time:"2023-05-16 14:20",value:19968.48},{time:"2023-05-16 14:25",value:19958.66},{time:"2023-05-16 14:30",value:19948.09},{time:"2023-05-16 14:35",value:19930.7},{time:"2023-05-16 14:40",value:19919.98},{time:"2023-05-16 14:45",value:19913.9},{time:"2023-05-16 14:50",value:19926.86},{time:"2023-05-16 14:55",value:19929.59},{time:"2023-05-16 15:00",value:19927.11},{time:"2023-05-16 15:05",value:19917.24},{time:"2023-05-16 15:10",value:19915.59},{time:"2023-05-16 15:15",value:19925.48},{time:"2023-05-16 15:20",value:19932.34},{time:"2023-05-16 15:25",value:19927.22},{time:"2023-05-16 15:30",value:19934.65},{time:"2023-05-16 15:35",value:19946.49},{time:"2023-05-16 15:40",value:19938.23},{time:"2023-05-16 15:45",value:19947.33},{time:"2023-05-16 15:50",value:19957.19},{time:"2023-05-16 15:55",value:19968.96},{time:"2023-05-16 16:00",value:19978.25}]}};var m=a(84522),v=a(10435),f=a(78481),o=a(94119),r=a(24581),s=a(57268);const n=(0,v.Q_)(m.BU.stock,{syncStorage:{watch:["followStocks","trendChartData","hqData"]},syncCloud:{watch:["followStocks"]},state:()=>({modalShow:!1,stockColor:{up:"#FF4D4F",down:"#34C759"},trendChartData:u,followStocks:i,hqData:l,flipping:!1,flipingTimer:null,dragId:""}),getters:{fullStateFollowStocks(){return this.followStocks.map((e=>{var t,a;return{...e,trend:(null===(t=this.hqData[e.QuoteID])||void 0===t?void 0:t.f4)>=0?"up":"down",hq:this.hqData[e.QuoteID]||{},chartData:(null===(a=this.trendChartData[e.QuoteID])||void 0===a?void 0:a.data)||[]}}))},topFourSecidStr(){let e=this.followStocks.map((e=>e.QuoteID));return e.length>4&&(e=e.slice(0,4)),e.sort(),e}},actions:{setModal(e){o.G.setStatus(r.Rm.stock,e),this.modalShow=e},setFollowStocks(e){this.followStocks=e},setDragId(e){this.dragId=e},async reqStocksPrice(){const e=this.followStocks.map((e=>e.QuoteID)),[t,a]=await(0,f._)(e.join(","));if(t||!a)return;const i={};this.followStocks.forEach(((e,t)=>{i[e.QuoteID]=a[t]})),this.hqData=i},async getHomeChartData(e){const t=this.trendChartData[e],a=(new Date).valueOf();if(t&&a-t.updateTime<36e5)return t.data;const[i,l]=await(0,f.zu)({secid:e,klt:5,lmt:60});return i||!l?null:l.map((e=>{const t=e.split(","),a=Number(t[2]);return{time:t[0],value:a}}))},async reqStockTrendData(){const e=this.topFourSecidStr.map((async e=>await this.getHomeChartData(e))),t=await Promise.all(e),a=Object.assign({},this.trendChartData);this.topFourSecidStr.forEach(((e,i)=>{t[i]&&(a[e]={updateTime:(new Date).valueOf(),data:t[i]})})),this.trendChartData=a},dragSort(e,t){if(e===t)return;const a=[...this.followStocks],i=a.findIndex((e=>t===e.QuoteID)),l=a.findIndex((t=>e===t.QuoteID));-1!==i&&-1!==l&&(i>l?(a.splice(i+1,0,a[l]),a.splice(l,1)):(a.splice(i,0,a[l]),a.splice(l+1,1)),this.setFollowStocks(a),this.setFlipping(!0))},setFlipping(e){window.clearTimeout(this.flipingTimer),e&&(this.flipping=e,this.flipingTimer=window.setTimeout((()=>{this.flipping=!1}),200))}}}),c=n(),d=(0,v.Jk)(c);(0,s.YP)((()=>d.topFourSecidStr.value.join(",")),(()=>{c.reqStockTrendData(),c.reqStocksPrice()}),{immediate:!1})}}]);